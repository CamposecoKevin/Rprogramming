<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Kevin Camposeco" />
  <title>Informe_Q3</title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
            pre > code.sourceCode { white-space: pre; position: relative; }
            pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
            pre > code.sourceCode > span:empty { height: 1.2em; }
            code.sourceCode > span { color: inherit; text-decoration: inherit; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            pre > code.sourceCode { white-space: pre-wrap; }
            pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
            }
            pre.numberSource code
              { counter-reset: source-line 0; }
            pre.numberSource code > span
              { position: relative; left: -4em; counter-increment: source-line; }
            pre.numberSource code > span > a:first-child::before
              { content: counter(source-line);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              {   }
            @media screen {
            pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
            }
            code span.al { color: #ff0000; font-weight: bold; } /* Alert */
            code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
            code span.at { color: #7d9029; } /* Attribute */
            code span.bn { color: #40a070; } /* BaseN */
            code span.bu { } /* BuiltIn */
            code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
            code span.ch { color: #4070a0; } /* Char */
            code span.cn { color: #880000; } /* Constant */
            code span.co { color: #60a0b0; font-style: italic; } /* Comment */
            code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
            code span.do { color: #ba2121; font-style: italic; } /* Documentation */
            code span.dt { color: #902000; } /* DataType */
            code span.dv { color: #40a070; } /* DecVal */
            code span.er { color: #ff0000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.fl { color: #40a070; } /* Float */
            code span.fu { color: #06287e; } /* Function */
            code span.im { } /* Import */
            code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
            code span.kw { color: #007020; font-weight: bold; } /* Keyword */
            code span.op { color: #666666; } /* Operator */
            code span.ot { color: #007020; } /* Other */
            code span.pp { color: #bc7a00; } /* Preprocessor */
            code span.sc { color: #4070a0; } /* SpecialChar */
            code span.ss { color: #bb6688; } /* SpecialString */
            code span.st { color: #4070a0; } /* String */
            code span.va { color: #19177c; } /* Variable */
            code span.vs { color: #4070a0; } /* VerbatimString */
            code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
          </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
  <style type="text/css">body{margin: 0 0 0 0;padding: 0 0 0 0;width: 100%;height: 100%;color: black;background-color: white;font-family: "Gill Sans MT", "Gill Sans", GillSans, sans-serif;font-size: 14pt;}div.toolbar {position: fixed; z-index: 200;top: auto; bottom: 0; left: 0; right: 0;height: 1.2em; text-align: right;padding-left: 1em;padding-right: 1em; font-size: 60%;color: DimGray;background-color: rgb(240,240,240);border-top: solid 1px rgb(180,180,180);}div.toolbar span.copyright {color: DimGray;margin-left: 0.5em;}div.initial_prompt {position: absolute;z-index: 1000;bottom: 1.2em;width: 100%;background-color: rgb(200,200,200);opacity: 0.35;background-color: rgb(200,200,200, 0.35);cursor: pointer;}div.initial_prompt p.help {text-align: center;}div.initial_prompt p.close {text-align: right;font-style: italic;}div.slidy_toc {position: absolute;z-index: 300;width: 60%;max-width: 30em;height: 30em;overflow: auto;top: auto;right: auto;left: 4em;bottom: 4em;padding: 1em;background: rgb(240,240,240);border-style: solid;border-width: 2px;font-size: 60%;}div.slidy_toc .toc_heading {text-align: center;width: 100%;margin: 0;margin-bottom: 1em;border-bottom-style: solid;border-bottom-color: rgb(180,180,180);border-bottom-width: 1px;}div.slide {z-index: 20;margin: 0 0 0 0;padding-top: 0;padding-bottom: 0;padding-left: 20px;padding-right: 20px;border-width: 0;clear: both;top: 0;bottom: 0;left: 0;right: 0;line-height: 120%;background-color: transparent;}div.background {display: none;}div.handout {margin-left: 20px;margin-right: 20px;}div.slide.titlepage {text-align: center;}div.slide.titlepage h1 {padding-top: 10%;margin-right: 0;}div.slide h1 {padding-left: 0;padding-right: 20pt;padding-top: 4pt;padding-bottom: 4pt;margin-top: 0;margin-left: 0;margin-right: 60pt;margin-bottom: 0.5em;display: block; font-size: 160%;line-height: 1.2em;background: transparent;}@media screen and (max-device-width: 1024px){div.slide { font-size: 100%; }}@media screen and (max-device-width: 800px){div.slide { font-size: 200%; }div.slidy_toc {top: 1em;left: 1em;right: auto;width: 80%;font-size: 180%;}}div.toc-heading {width: 100%;border-bottom: solid 1px rgb(180,180,180);margin-bottom: 1em;text-align: center;}img {image-rendering: optimize-quality;}pre {font-size: 80%;font-weight: bold;line-height: 120%;padding-top: 0.2em;padding-bottom: 0.2em;padding-left: 1em;padding-right: 1em;border-style: solid;border-left-width: 1em;border-top-width: thin;border-right-width: thin;border-bottom-width: thin;border-color: #95ABD0;color: #00428C;background-color: #E4E5E7;}li pre { margin-left: 0; }blockquote { font-style: italic }img { background-color: transparent }p.copyright { font-size: smaller }.center { text-align: center }.footnote { font-size: smaller; margin-left: 2em; }a img { border-width: 0; border-style: none }a:visited { color: navy }a:link { color: navy }a:hover { color: red; text-decoration: underline }a:active { color: red; text-decoration: underline }a {text-decoration: none}.toolbar a:link {color: blue}.toolbar a:visited {color: blue}.toolbar a:active {color: red}.toolbar a:hover {color: red}ul { list-style-type: square; }ul ul { list-style-type: disc; }ul ul ul { list-style-type: circle; }ul ul ul ul { list-style-type: disc; }li { margin-left: 0.5em; margin-top: 0.5em; }li li { font-size: 85%; font-style: italic }li li li { font-size: 85%; font-style: normal }div dt{margin-left: 0;margin-top: 1em;margin-bottom: 0.5em;font-weight: bold;}div dd{margin-left: 2em;margin-bottom: 0.5em;}p,pre,ul,ol,blockquote,h2,h3,h4,h5,h6,dl,table {margin-left: 1em;margin-right: 1em;}p.subhead { font-weight: bold; margin-top: 2em; }.smaller { font-size: smaller }.bigger { font-size: 130% }td,th { padding: 0.2em }ul {margin: 0.5em 1.5em 0.5em 1.5em;padding: 0;}ol {margin: 0.5em 1.5em 0.5em 1.5em;padding: 0;}ul { list-style-type: square; }ul ul { list-style-type: disc; }ul ul ul { list-style-type: circle; }ul ul ul ul { list-style-type: disc; }ul li { list-style: square;margin: 0.1em 0em 0.6em 0;padding: 0 0 0 0;line-height: 140%;}ol li { margin: 0.1em 0em 0.6em 1.5em;padding: 0 0 0 0px;line-height: 140%;list-style-type: decimal;}li ul li { font-size: 85%; font-style: italic;list-style-type: disc;background: transparent;padding: 0 0 0 0;}li li ul li { font-size: 85%; font-style: normal;list-style-type: circle;background: transparent;padding: 0 0 0 0;}li li li ul li {list-style-type: disc;background: transparent;padding: 0 0 0 0;}li ol li {list-style-type: decimal;}li li ol li {list-style-type: decimal;}ol.outline li:hover { cursor: pointer }ol.outline li.nofold:hover { cursor: default }ul.outline li:hover { cursor: pointer }ul.outline li.nofold:hover { cursor: default }ol.outline { list-style:decimal; }ol.outline ol { list-style-type:lower-alpha }ol.outline li.nofold {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAIACAMzMzOvr/ywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7) no-repeat 0px 0.5em;}ol.outline li.unfolded {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAMPD/8zMzOvr/////ywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs=) no-repeat 0px 0.5em;}ol.outline li.folded {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAMPD/8zMzOvr/////ywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs=) no-repeat 0px 0.5em;}ol.outline li.unfolded:hover {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAAAAAAAA/8PD/////ywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs=) no-repeat 0px 0.5em;}ol.outline li.folded:hover {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAAAAAAAA/8PD/////ywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs=) no-repeat 0px 0.5em;}ul.outline li.nofold {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAIACAMzMzOvr/ywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7) no-repeat 0px 0.5em;}ul.outline li.unfolded {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAMPD/8zMzOvr/////ywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs=) no-repeat 0px 0.5em;}ul.outline li.folded {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAMPD/8zMzOvr/////ywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs=) no-repeat 0px 0.5em;}ul.outline li.unfolded:hover {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAAAAAAAA/8PD/////ywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs=) no-repeat 0px 0.5em;}ul.outline li.folded:hover {padding: 0 0 0 20px;background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAAAAAAAA/8PD/////ywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs=) no-repeat 0px 0.5em;}a.titleslide { font-weight: bold; font-style: italic }img.hidden { display: none; visibility: hidden }div.initial_prompt { display: none; visibility: hidden }div.slide {visibility: visible;position: inherit;}div.handout {border-top-style: solid;border-top-width: thin;border-top-color: black;}@media screen {.hidden { display: none; visibility: visible }div.slide.hidden { display: block; visibility: visible }div.handout.hidden { display: block; visibility: visible }div.background { display: none; visibility: hidden }body.single_slide div.initial_prompt { display: block; visibility: visible }body.single_slide div.background { display: block; visibility: visible }body.single_slide div.background.hidden { display: none; visibility: hidden }body.single_slide .invisible { visibility: hidden }body.single_slide .hidden { display: none; visibility: hidden }body.single_slide div.slide { position: absolute }body.single_slide div.handout { display: none; visibility: hidden }}@media print {.hidden { display: block; visibility: visible }div.slide pre { font-size: 60%; padding-left: 0.5em; }div.toolbar { display: none; visibility: hidden; }div.slidy_toc { display: none; visibility: hidden; }div.background { display: none; visibility: hidden; }div.slide { page-break-before: always }div.slide.first-slide { page-break-before: avoid }}.jslider table {margin-left: 0em;margin-right: 0em;}table.dataTable, .shiny-datatable-output div {font-size: 14pt;}.dataTables_info, .dataTables_paginate {font-size: 19px;}pre.sourceCode, code.sourceCode {font-size: 80%;}label, button, input, select, textarea {font-size: 14pt;}ul.nav, ul.nav li {list-style-type: none;}</style>
  <script src="data:application/javascript;base64,Lyogc2xpZHkuanMNCg0KICAgQ29weXJpZ2h0IChjKSAyMDA1LTIwMTMgVzNDIChNSVQsIEVSQ0lNLCBLZWlvKSwgQWxsIFJpZ2h0cyBSZXNlcnZlZC4NCiAgIFczQyBsaWFiaWxpdHksIHRyYWRlbWFyaywgZG9jdW1lbnQgdXNlIGFuZCBzb2Z0d2FyZSBsaWNlbnNpbmcNCiAgIHJ1bGVzIGFwcGx5LCBzZWU6DQoNCiAgIGh0dHA6Ly93d3cudzMub3JnL0NvbnNvcnRpdW0vTGVnYWwvY29weXJpZ2h0LWRvY3VtZW50cw0KICAgaHR0cDovL3d3dy53My5vcmcvQ29uc29ydGl1bS9MZWdhbC9jb3B5cmlnaHQtc29mdHdhcmUNCg0KICAgRGVmaW5lcyBzaW5nbGUgbmFtZSAidzNjX3NsaWR5IiBpbiBnbG9iYWwgbmFtZXNwYWNlDQogICBBZGRzIGV2ZW50IGhhbmRsZXJzIHdpdGhvdXQgdHJhbXBsaW5nIG9uIGFueSBvdGhlcnMNCiovDQoNCi8vIHRoZSBzbGlkeSBvYmplY3QgaW1wbGVtZW50YXRpb24NCnZhciB3M2Nfc2xpZHkgPSB7DQogIC8vIGNsYXNzaWZ5IHdoaWNoIGtpbmQgb2YgYnJvd3NlciB3ZSdyZSBydW5uaW5nIHVuZGVyDQogIG5zX3BvczogKHR5cGVvZiB3aW5kb3cucGFnZVlPZmZzZXQhPSd1bmRlZmluZWQnKSwNCiAga2h0bWw6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiS0hUTUwiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwNCiAgb3BlcmE6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiT3BlcmEiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwNCiAgaXBhZDogKChuYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJpUGFkIikgPj0gMCA/IHRydWUgOiBmYWxzZSksDQogIGlwaG9uZTogKChuYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJpUGhvbmUiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwNCiAgYW5kcm9pZDogKChuYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJBbmRyb2lkIikgPj0gMCA/IHRydWUgOiBmYWxzZSksDQogIGllOiAodHlwZW9mIGRvY3VtZW50LmFsbCAhPSAidW5kZWZpbmVkIiAmJiAhdGhpcy5vcGVyYSksDQogIGllNjogKCF0aGlzLm5zX3BvcyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUgNiIpICE9IC0xKSwNCiAgaWU3OiAoIXRoaXMubnNfcG9zICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA3IikgIT0gLTEpLA0KICBpZTg6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDgiKSAhPSAtMSksDQogIGllOTogKCF0aGlzLm5zX3BvcyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUgOSIpICE9IC0xKSwNCg0KICAvLyBkYXRhIGZvciBzd2lwZSBhbmQgZG91YmxlIHRhcCBkZXRlY3Rpb24gb24gdG91Y2ggc2NyZWVucw0KICBsYXN0X3RhcDogMCwNCiAgcHJldl90YXA6IDAsDQogIHN0YXJ0X3g6IDAsDQogIHN0YXJ0X3k6IDAsDQogIGRlbHRhX3g6IDAsDQogIGRlbHRhX3k6IDAsDQoNCiAgLy8gYXJlIHdlIHJ1bm5pbmcgYXMgWEhUTUw/IChkb2Vzbid0IHdvcmsgb24gT3BlcmEpDQogIGlzX3hodG1sOiAveG1sLy50ZXN0KGRvY3VtZW50LmNvbnRlbnRUeXBlKSwNCg0KICBzbGlkZV9udW1iZXI6IDAsIC8vIGludGVnZXIgc2xpZGUgY291bnQ6IDAsIDEsIDIsIC4uLg0KICBzbGlkZV9udW1iZXJfZWxlbWVudDogbnVsbCwgLy8gZWxlbWVudCBjb250YWluaW5nIHNsaWRlIG51bWJlcg0KICBzbGlkZXM6IFtdLCAvLyBzZXQgdG8gYXJyYXkgb2Ygc2xpZGUgZGl2J3MNCiAgbm90ZXM6IFtdLCAvLyBzZXQgdG8gYXJyYXkgb2YgaGFuZG91dCBkaXYncw0KICBiYWNrZ3JvdW5kczogW10sIC8vIHNldCB0byBhcnJheSBvZiBiYWNrZ3JvdW5kIGRpdidzDQogIG9ic2VydmVyczogW10sIC8vIGxpc3Qgb2Ygb2JzZXJ2ZXIgZnVuY3Rpb25zDQogIHRvb2xiYXI6IG51bGwsIC8vIGVsZW1lbnQgY29udGFpbmluZyB0b29sYmFyDQogIHRpdGxlOiBudWxsLCAvLyBkb2N1bWVudCB0aXRsZQ0KICBsYXN0X3Nob3duOiBudWxsLCAvLyBsYXN0IGluY3JlbWVudGFsbHkgc2hvd24gaXRlbQ0KICBlb3M6IG51bGwsICAvLyBzcGFuIGVsZW1lbnQgZm9yIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3INCiAgdG9jOiBudWxsLCAvLyB0YWJsZSBvZiBjb250ZW50cw0KICBvdXRsaW5lOiBudWxsLCAvLyBvdXRsaW5lIGVsZW1lbnQgd2l0aCB0aGUgZm9jdXMNCiAgc2VsZWN0ZWRfdGV4dF9sZW46IDAsIC8vIGxlbmd0aCBvZiBkcmFnIHNlbGVjdGlvbiBvbiBkb2N1bWVudA0KICB2aWV3X2FsbDogMCwgIC8vIDEgdG8gdmlldyBhbGwgc2xpZGVzICsgaGFuZG91dHMNCiAgd2FudF90b29sYmFyOiB0cnVlLCAgLy8gdXNlciBwcmVmZXJlbmNlIHRvIHNob3cvaGlkZSB0b29sYmFyDQogIG1vdXNlX2NsaWNrX2VuYWJsZWQ6IHRydWUsIC8vIGVuYWJsZXMgbGVmdCBjbGljayBmb3IgbmV4dCBzbGlkZQ0KICBzY3JvbGxfaGFjazogMCwgLy8gSUUgd29yayBhcm91bmQgZm9yIHBvc2l0aW9uOiBmaXhlZA0KICBkaXNhYmxlX3NsaWRlX2NsaWNrOiBmYWxzZSwgIC8vIHVzZWQgYnkgY2xpY2tlZCBhbmNob3JzDQoNCiAgbGFuZzogImVuIiwgLy8gdXBkYXRlZCB0byBsYW5ndWFnZSBzcGVjaWZpZWQgYnkgaHRtbCBmaWxlDQoNCiAgaGVscF9hbmNob3I6IG51bGwsIC8vIHVzZWQgZm9yIGtleWJvYXJkIGZvY3VzIGhhY2sgaW4gc2hvd1Rvb2xiYXIoKQ0KICBoZWxwX3BhZ2U6ICJodHRwOi8vd3d3LnczLm9yZy9UYWxrcy9Ub29scy9TbGlkeTIvaGVscC9oZWxwLmh0bWwiLA0KICBoZWxwX3RleHQ6ICJOYXZpZ2F0ZSB3aXRoIG1vdXNlIGNsaWNrLCBzcGFjZSBiYXIsIEN1cnNvciBMZWZ0L1JpZ2h0LCAiICsNCiAgICAgICAgICAgICAib3IgUGcgVXAgYW5kIFBnIERuLiBVc2UgUyBhbmQgQiB0byBjaGFuZ2UgZm9udCBzaXplLiIsDQoNCiAgc2l6ZV9pbmRleDogMCwNCiAgc2l6ZV9hZGp1c3RtZW50OiAwLA0KICBzaXplczogIG5ldyBBcnJheSgiMTBwdCIsICIxMnB0IiwgIjE0cHQiLCAiMTZwdCIsICIxOHB0IiwgIjIwcHQiLA0KICAgICAgICAgICAgICAgICAgICAiMjJwdCIsICIyNHB0IiwgIjI2cHQiLCAiMjhwdCIsICIzMHB0IiwgIjMycHQiKSwNCg0KICAvLyBuZWVkZWQgZm9yIGVmZmljaWVudCByZXNpemluZw0KICBsYXN0X3dpZHRoOiAwLA0KICBsYXN0X2hlaWdodDogMCwNCg0KDQogIC8vIE5lZWRlZCBmb3IgY3Jvc3MgYnJvd3NlciBzdXBwb3J0IGZvciByZWxhdGl2ZSB3aWR0aC9oZWlnaHQgb24NCiAgLy8gb2JqZWN0IGVsZW1lbnRzLiBUaGUgd29yayBhcm91bmQgaXMgdG8gc2F2ZSB3aWR0aC9oZWlnaHQgYXR0cmlidXRlcw0KICAvLyBhbmQgdGhlbiB0byByZWNvbXB1dGUgYWJzb2x1dGUgd2lkdGgvaGVpZ2h0IGRpbWVuc2lvbnMgb24gcmVzaXppbmcNCiAgIG9iamVjdHM6IFtdLA0KDQogIC8vIGF0dGFjaCBpbml0aWFsaWF0aW9uIGV2ZW50IGhhbmRsZXJzDQogIHNldF91cDogZnVuY3Rpb24gKCkgew0KICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7IHczY19zbGlkeS5pbml0KCk7IH07DQogICAgaWYgKHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPSAidW5kZWZpbmVkIikNCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgaW5pdCwgZmFsc2UpOw0KICAgIGVsc2UNCiAgICAgIHdpbmRvdy5hdHRhY2hFdmVudCgib25sb2FkIiwgaW5pdCk7DQogIH0sDQoNCiAgaGlkZV9zbGlkZXM6IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiAhdzNjX3NsaWR5LmluaXRpYWxpemVkKQ0KICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS52aXNpYmlsaXR5ID0gImhpZGRlbiI7DQogICAgZWxzZQ0KICAgICAgc2V0VGltZW91dCh3M2Nfc2xpZHkuaGlkZV9zbGlkZXMsIDUwKTsNCiAgfSwNCg0KICAvLyBoYWNrIHRvIHBlcnN1YWRlIElFIHRvIGNvbXB1dGUgY29ycmVjdCBkb2N1bWVudCBoZWlnaHQNCiAgLy8gYXMgbmVlZGVkIGZvciBzaW11bGF0aW5nIGZpeGVkIHBvc2l0aW9uaW5nIG9mIHRvb2xiYXINCiAgaWVfaGFjazogZnVuY3Rpb24gKCkgew0KICAgIHdpbmRvdy5yZXNpemVCeSgwLC0xKTsNCiAgICB3aW5kb3cucmVzaXplQnkoMCwgMSk7DQogIH0sDQoNCiAgaW5pdDogZnVuY3Rpb24gKCkgew0KICAgIC8vYWxlcnQoInNsaWR5IHN0YXJ0aW5nIHRlc3QgMTAiKTsNCiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgdGhpcy5pbml0X2xvY2FsaXphdGlvbigpOw0KICAgIHRoaXMuYWRkX3Rvb2xiYXIoKTsNCiAgICB0aGlzLndyYXBfaW1wbGljaXRfc2xpZGVzKCk7DQogICAgdGhpcy5jb2xsZWN0X3NsaWRlcygpOw0KICAgIHRoaXMuY29sbGVjdF9ub3RlcygpOw0KICAgIHRoaXMuY29sbGVjdF9iYWNrZ3JvdW5kcygpOw0KICAgIHRoaXMub2JqZWN0cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpOw0KICAgIHRoaXMucGF0Y2hfYW5jaG9ycygpOw0KICAgIHRoaXMuc2xpZGVfbnVtYmVyID0gdGhpcy5maW5kX3NsaWRlX251bWJlcihsb2NhdGlvbi5ocmVmKTsNCiAgICB3aW5kb3cub2Zmc2NyZWVuYnVmZmVyaW5nID0gdHJ1ZTsNCiAgICB0aGlzLnNpemVfYWRqdXN0bWVudCA9IHRoaXMuZmluZF9zaXplX2FkanVzdCgpOw0KICAgIHRoaXMudGltZV9sZWZ0ID0gdGhpcy5maW5kX2R1cmF0aW9uKCk7DQogICAgdGhpcy5oaWRlX2ltYWdlX3Rvb2xiYXIoKTsgIC8vIHN1cHByZXNzIElFIGltYWdlIHRvb2xiYXIgcG9wdXANCiAgICB0aGlzLmluaXRfb3V0bGluZXIoKTsgIC8vIGFjdGl2YXRlIGZvbGQvdW5mb2xkIHN1cHBvcnQNCiAgICB0aGlzLnRpdGxlID0gZG9jdW1lbnQudGl0bGU7DQogICAgdGhpcy5rZXlib2FyZGxlc3MgPSAodGhpcy5pcGFkfHx0aGlzLmlwaG9uZXx8dGhpcy5hbmRyb2lkKTsNCg0KICAgIGlmICh0aGlzLmtleWJvYXJkbGVzcykNCiAgICB7DQogICAgICB3M2Nfc2xpZHkucmVtb3ZlX2NsYXNzKHczY19zbGlkeS50b29sYmFyLCAiaGlkZGVuIikNCiAgICAgIHRoaXMud2FudF90b29sYmFyID0gMDsNCiAgICB9DQoNCiAgICAvLyB3b3JrIGFyb3VuZCBmb3Igb3BlcmEgYnVnDQogICAgdGhpcy5pc194aHRtbCA9IChkb2N1bWVudC5ib2R5LnRhZ05hbWUgPT0gIkJPRFkiID8gZmFsc2UgOiB0cnVlKTsNCg0KICAgIGlmICh0aGlzLnNsaWRlcy5sZW5ndGggPiAwKQ0KICAgIHsNCiAgICAgIHZhciBzbGlkZSA9IHRoaXMuc2xpZGVzW3RoaXMuc2xpZGVfbnVtYmVyXTsNCiAgIA0KICAgICAgaWYgKHRoaXMuc2xpZGVfbnVtYmVyID4gMCkNCiAgICAgIHsNCiAgICAgICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsNCiAgICAgICAgdGhpcy5sYXN0X3Nob3duID0gdGhpcy5wcmV2aW91c19pbmNyZW1lbnRhbF9pdGVtKG51bGwpOw0KICAgICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKHRydWUpOw0KICAgICAgfQ0KICAgICAgZWxzZQ0KICAgICAgew0KICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSBudWxsOw0KICAgICAgICB0aGlzLnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7DQogICAgICAgIHRoaXMuc2V0X2Vvc19zdGF0dXMoIXRoaXMubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHRoaXMubGFzdF9zaG93bikpOw0KICAgICAgfQ0KDQogICAgICB0aGlzLnNldF9sb2NhdGlvbigpOw0KICAgICAgdGhpcy5hZGRfY2xhc3ModGhpcy5zbGlkZXNbMF0sICJmaXJzdC1zbGlkZSIpOw0KICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOw0KICAgIH0NCg0KICAgIHRoaXMudG9jID0gdGhpcy50YWJsZV9vZl9jb250ZW50cygpOw0KDQogICAgdGhpcy5hZGRfaW5pdGlhbF9wcm9tcHQoKTsNCg0KICAgIC8vIGJpbmQgZXZlbnQgaGFuZGxlcnMgd2l0aG91dCBpbnRlcmZlcmluZyB3aXRoIGN1c3RvbSBwYWdlIHNjcmlwdHMNCiAgICAvLyBUYXAgZXZlbnRzIGJlaGF2ZSB0b28gd2VpcmRseSB0byBzdXBwb3J0IGNsaWNrcyByZWxpYWJseSBvbg0KICAgIC8vIGlQaG9uZSBhbmQgaVBhZCwgc28gZXhjbHVkZSB0aGVzZSBmcm9tIGNsaWNrIGhhbmRsZXINCg0KICAgIGlmICghdGhpcy5rZXlib2FyZGxlc3MpDQogICAgew0KICAgICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgImNsaWNrIiwgdGhpcy5tb3VzZV9idXR0b25fY2xpY2spOw0KICAgICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgIm1vdXNlZG93biIsIHRoaXMubW91c2VfYnV0dG9uX2Rvd24pOw0KICAgIH0NCg0KICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAia2V5ZG93biIsIHRoaXMua2V5X2Rvd24pOw0KICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAia2V5cHJlc3MiLCB0aGlzLmtleV9wcmVzcyk7DQogICAgdGhpcy5hZGRfbGlzdGVuZXIod2luZG93LCAicmVzaXplIiwgdGhpcy5yZXNpemVkKTsNCiAgICB0aGlzLmFkZF9saXN0ZW5lcih3aW5kb3csICJzY3JvbGwiLCB0aGlzLnNjcm9sbGVkKTsNCiAgICB0aGlzLmFkZF9saXN0ZW5lcih3aW5kb3csICJ1bmxvYWQiLCB0aGlzLnVubG9hZGVkKTsNCg0KICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAiZ2VzdHVyZWNoYW5nZSIsIGZ1bmN0aW9uICgpDQogICAgew0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0pOw0KDQogICAgdGhpcy5hdHRhY2hfdG91Y2hfaGFuZGVycyh0aGlzLnNsaWRlcyk7DQoNCiAgICAvLyB0aGlzIHNlZW1zIHRvIGJlIGEgZGVidWdnaW5nIGhhY2sNCiAgICAvL2lmICghZG9jdW1lbnQuYm9keS5vbmNsaWNrKQ0KICAgIC8vICBkb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7IH07DQoNCiAgICB0aGlzLnNpbmdsZV9zbGlkZV92aWV3KCk7DQoNCiAgICAvL3RoaXMuc2V0X2xvY2F0aW9uKCk7DQoNCiAgICB0aGlzLnJlc2l6ZWQoKTsNCg0KICAgIGlmICh0aGlzLmllNykNCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7DQoNCiAgICB0aGlzLnNob3dfdG9vbGJhcigpOw0KDQogICAgLy8gZm9yIGJhY2sgYnV0dG9uIGRldGVjdGlvbg0KICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgdzNjX3NsaWR5LmNoZWNrX2xvY2F0aW9uKCk7IH0sIDIwMCk7DQogICAgdzNjX3NsaWR5LmluaXRpYWxpemVkID0gdHJ1ZTsNCiAgfSwNCg0KICAvLyBjcmVhdGUgZGl2IGVsZW1lbnQgd2l0aCBsaW5rcyB0byBlYWNoIHNsaWRlDQogIHRhYmxlX29mX2NvbnRlbnRzOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHRvYyA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOw0KICAgIHRoaXMuYWRkX2NsYXNzKHRvYywgInNsaWR5X3RvYyBoaWRkZW4iKTsNCiAgICAvL3RvYy5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwgIjAiKTsNCg0KICAgIHZhciBoZWFkaW5nID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7DQogICAgdGhpcy5hZGRfY2xhc3MoaGVhZGluZywgInRvYy1oZWFkaW5nIik7DQogICAgaGVhZGluZy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJUYWJsZSBvZiBDb250ZW50cyIpOw0KDQogICAgdG9jLmFwcGVuZENoaWxkKGhlYWRpbmcpOw0KICAgIHZhciBwcmV2aW91cyA9IG51bGw7DQoNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2xpZGVzLmxlbmd0aDsgKytpKQ0KICAgIHsNCiAgICAgIHZhciB0aXRsZSA9IHRoaXMuaGFzX2NsYXNzKHRoaXMuc2xpZGVzW2ldLCAidGl0bGUiKTsNCiAgICAgIHZhciBudW0gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgoaSArIDEpICsgIi4gIik7DQoNCiAgICAgIHRvYy5hcHBlbmRDaGlsZChudW0pOw0KDQogICAgICB2YXIgYSA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsNCiAgICAgIGEuc2V0QXR0cmlidXRlKCJocmVmIiwgIiMoIiArIChpKzEpICsgIikiKTsNCg0KICAgICAgaWYgKHRpdGxlKQ0KICAgICAgICB0aGlzLmFkZF9jbGFzcyhhLCAidGl0bGVzbGlkZSIpOw0KDQogICAgICB2YXIgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMuc2xpZGVfbmFtZShpKSk7DQogICAgICBhLmFwcGVuZENoaWxkKG5hbWUpOw0KICAgICAgYS5vbmNsaWNrID0gdzNjX3NsaWR5LnRvY19jbGljazsNCiAgICAgIGEub25rZXlkb3duID0gdzNjX3NsaWR5LnRvY19rZXlfZG93bjsNCiAgICAgIGEucHJldmlvdXMgPSBwcmV2aW91czsNCg0KICAgICAgaWYgKHByZXZpb3VzKQ0KICAgICAgICBwcmV2aW91cy5uZXh0ID0gYTsNCg0KICAgICAgdG9jLmFwcGVuZENoaWxkKGEpOw0KDQogICAgICBpZiAoaSA9PSAwKQ0KICAgICAgICB0b2MuZmlyc3QgPSBhOw0KDQogICAgICBpZiAoaSA8IHRoaXMuc2xpZGVzLmxlbmd0aCAtIDEpDQogICAgICB7DQogICAgICAgIHZhciBiciA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImJyIik7DQogICAgICAgIHRvYy5hcHBlbmRDaGlsZChicik7DQogICAgICB9DQoNCiAgICAgIHByZXZpb3VzID0gYTsNCiAgICB9DQoNCiAgICB0b2MuZm9jdXMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAodGhpcy5maXJzdCkNCiAgICAgICAgdGhpcy5maXJzdC5mb2N1cygpOw0KICAgIH0NCg0KICAgIHRvYy5vbm1vdXNldXAgPSB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX3VwOw0KDQogICAgdG9jLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgew0KICAgICAgZXx8KGU9d2luZG93LmV2ZW50KTsNCg0KICAgICAgaWYgKHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA8PSAwKQ0KICAgICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7DQoNCiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOw0KICAgIA0KICAgICAgaWYgKGUuY2FuY2VsICE9IHVuZGVmaW5lZCkNCiAgICAgICAgZS5jYW5jZWwgPSB0cnVlOw0KICAgICAgDQogICAgICBpZiAoZS5yZXR1cm5WYWx1ZSAhPSB1bmRlZmluZWQpDQogICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsNCiAgICAgIA0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH07DQoNCiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZSh0b2MsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7DQogICAgcmV0dXJuIHRvYzsNCiAgfSwNCg0KICBpc19zaG93bl90b2M6IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gIXczY19zbGlkeS5oYXNfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOw0KICB9LA0KDQogIHNob3dfdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsNCiAgICB3M2Nfc2xpZHkucmVtb3ZlX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKTsNCiAgICB2YXIgdG9jID0gdzNjX3NsaWR5LnRvYzsNCiAgICB0b2MuZm9jdXMoKTsNCg0KICAgIGlmICh3M2Nfc2xpZHkuaWU3ICYmIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPT0gMCkNCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7DQogIH0sDQoNCiAgaGlkZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKGZvY3VzKSB7DQogICAgdzNjX3NsaWR5LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9jLCAiaGlkZGVuIik7DQoNCiAgICBpZiAoZm9jdXMgJiYgIXczY19zbGlkeS5vcGVyYSAmJg0KICAgICAgICAhdzNjX3NsaWR5Lmhhc19jbGFzcyh3M2Nfc2xpZHkudG9jLCAiaGlkZGVuIikpDQogICAgICB3M2Nfc2xpZHkuc2V0X2ZvY3VzKCk7DQogIH0sDQoNCiAgdG9nZ2xlX3RhYmxlX29mX2NvbnRlbnRzOiBmdW5jdGlvbiAoKSB7DQogICAgaWYgKHczY19zbGlkeS5pc19zaG93bl90b2MoKSkNCiAgICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKHRydWUpOw0KICAgIGVsc2UNCiAgICAgIHczY19zbGlkeS5zaG93X3RhYmxlX29mX2NvbnRlbnRzKCk7DQogIH0sDQoNCiAgLy8gY2FsbGVkIG9uIGNsaWNraW5nIHRvYyBlbnRyeQ0KICB0b2NfY2xpY2s6IGZ1bmN0aW9uIChlKSB7DQogICAgaWYgKCFlKQ0KICAgICAgZSA9IHdpbmRvdy5ldmVudDsNCg0KICAgIHZhciB0YXJnZXQgPSB3M2Nfc2xpZHkuZ2V0X3RhcmdldChlKTsNCg0KICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0Lm5vZGVUeXBlID09IDEpDQogICAgew0KICAgICAgdmFyIHVyaSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsNCg0KICAgICAgaWYgKHVyaSkNCiAgICAgIHsNCiAgICAgICAgLy9hbGVydCgiZ29pbmcgdG8gIiArIHVyaSk7DQogICAgICAgIHZhciBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsNCiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5maW5kX3NsaWRlX251bWJlcih1cmkpOw0KICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQogICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsNCiAgICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOw0KICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsNCiAgICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7DQogICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsNCiAgICAgICAgLy90YXJnZXQuZm9jdXMoKTsNCg0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgIGlmICghdzNjX3NsaWR5Lm9wZXJhKQ0KICAgICAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKQ0KICAgICAgICB7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsNCiAgICBpZiAodzNjX3NsaWR5LmllNykgdzNjX3NsaWR5LmllX2hhY2soKTsNCiAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsNCiAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChlKTsNCiAgfSwNCg0KICAvLyBjYWxsZWQgb25rZXlkb3duIGZvciB0b2MgZW50cnkNCiAgdG9jX2tleV9kb3duOiBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICB2YXIga2V5Ow0KDQogICAgaWYgKCFldmVudCkNCiAgICAgIHZhciBldmVudCA9IHdpbmRvdy5ldmVudDsNCg0KICAgIC8vIGtsdWRnZSBhcm91bmQgTlMvSUUgZGlmZmVyZW5jZXMgDQogICAgaWYgKHdpbmRvdy5ldmVudCkNCiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOw0KICAgIGVsc2UgaWYgKGV2ZW50LndoaWNoKQ0KICAgICAga2V5ID0gZXZlbnQud2hpY2g7DQogICAgZWxzZQ0KICAgICAgcmV0dXJuIHRydWU7IC8vIFlpa2VzISB1bmtub3duIGJyb3dzZXINCg0KICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybw0KICAgIC8vIGFzIGZvciBhbHQgb24gT3BlcmEgYW5kIEtvbnF1ZXJvcg0KICAgIGlmICgha2V5KQ0KICAgICAgcmV0dXJuIHRydWU7DQoNCiAgICAvLyBjaGVjayBmb3IgY29uY3VycmVudCBjb250cm9sL2NvbW1hbmQvYWx0IGtleQ0KICAgIC8vIGJ1dCBhcmUgdGhlc2Ugb25seSBwcmVzZW50IG9uIG1vdXNlIGV2ZW50cz8NCg0KICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50LmFsdEtleSkNCiAgICAgIHJldHVybiB0cnVlOw0KDQogICAgaWYgKGtleSA9PSAxMykNCiAgICB7DQogICAgICB2YXIgdXJpID0gdGhpcy5nZXRBdHRyaWJ1dGUoImhyZWYiKTsNCg0KICAgICAgaWYgKHVyaSkNCiAgICAgIHsNCiAgICAgICAgLy9hbGVydCgiZ29pbmcgdG8gIiArIHVyaSk7DQogICAgICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsNCiAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOw0KICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LmZpbmRfc2xpZGVfbnVtYmVyKHVyaSk7DQogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsNCiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBudWxsOw0KICAgICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7DQogICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOw0KICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsNCiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOw0KICAgICAgICAvL3RhcmdldC5mb2N1cygpOw0KDQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgaWYgKCF3M2Nfc2xpZHkub3BlcmEpDQogICAgICAgICAgICB3M2Nfc2xpZHkuc2V0X2ZvY3VzKCk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGUpDQogICAgICAgIHsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsNCg0KICAgICAgaWYgKHNlbGYuaWU3KQ0KICAgICAgIHczY19zbGlkeS5pZV9oYWNrKCk7DQoNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQoNCiAgICBpZiAoa2V5ID09IDQwICYmIHRoaXMubmV4dCkNCiAgICB7DQogICAgICB0aGlzLm5leHQuZm9jdXMoKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQoNCiAgICBpZiAoa2V5ID09IDM4ICYmIHRoaXMucHJldmlvdXMpDQogICAgew0KICAgICAgdGhpcy5wcmV2aW91cy5mb2N1cygpOw0KICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KICB9LA0KDQogIHRvdWNoc3RhcnQ6IGZ1bmN0aW9uIChlKQ0KICB7DQogICAgLy8gYSBkb3VibGUgdG91Y2ggb2Z0ZW4gc3RhcnRzIHdpdGggYQ0KICAgIC8vIHNpbmdsZSB0b3VjaCBkdWUgdG8gZmluZ2VycyB0b3VjaGluZw0KICAgIC8vIGRvd24gYXQgc2xpZ2h0bHkgZGlmZmVyZW50IHRpbWVzDQogICAgLy8gdGh1cyBhdm9pZCBjYWxsaW5nIHByZXZlbnREZWZhdWx0IGhlcmUNCiAgICB0aGlzLnByZXZfdGFwID0gdGhpcy5sYXN0X3RhcDsNCiAgICB0aGlzLmxhc3RfdGFwID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7DQoNCiAgICB2YXIgdGFwX2RlbGF5ID0gdGhpcy5sYXN0X3RhcCAtIHRoaXMucHJldl90YXA7DQoNCiAgICBpZiAodGFwX2RlbGF5IDw9IDIwMCkNCiAgICB7DQogICAgICAvLyBkb3VibGUgdGFwDQogICAgfQ0KDQogICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdOw0KDQogICAgdGhpcy5wYWdlWCA9IHRvdWNoLnBhZ2VYOw0KICAgIHRoaXMucGFnZVkgPSB0b3VjaC5wYWdlWTsNCiAgICB0aGlzLnNjcmVlblggPSB0b3VjaC5zY3JlZW5YOw0KICAgIHRoaXMuc2NyZWVuWSA9IHRvdWNoLnNjcmVlblk7DQogICAgdGhpcy5jbGllbnRYID0gdG91Y2guY2xpZW50WDsNCiAgICB0aGlzLmNsaWVudFkgPSB0b3VjaC5jbGllbnRZOw0KDQogICAgdGhpcy5kZWx0YV94ID0gdGhpcy5kZWx0YV95ID0gMDsNCiAgfSwNCg0KICB0b3VjaG1vdmU6IGZ1bmN0aW9uIChlKQ0KICB7DQogICAgLy8gb3ZlcnJpZGUgbmF0aXZlIGdlc3R1cmVzIGZvciBzaW5nbGUgdG91Y2gNCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpDQogICAgICByZXR1cm47DQoNCiAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdOw0KICAgIHRoaXMuZGVsdGFfeCA9IHRvdWNoLnBhZ2VYIC0gdGhpcy5wYWdlWDsNCiAgICB0aGlzLmRlbHRhX3kgPSB0b3VjaC5wYWdlWSAtIHRoaXMucGFnZVk7DQogIH0sDQoNCiAgdG91Y2hlbmQ6IGZ1bmN0aW9uIChlKQ0KICB7DQogICAgLy8gZGVmYXVsdCBiZWhhdmlvciBmb3IgbXVsdGktdG91Y2gNCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpDQogICAgICByZXR1cm47DQoNCiAgICB2YXIgZGVsYXkgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIHRoaXMubGFzdF90YXA7DQogICAgdmFyIGR4ID0gdGhpcy5kZWx0YV94Ow0KICAgIHZhciBkeSA9IHRoaXMuZGVsdGFfeTsNCiAgICB2YXIgYWJzX2R4ID0gTWF0aC5hYnMoZHgpOw0KICAgIHZhciBhYnNfZHkgPSBNYXRoLmFicyhkeSk7DQoNCiAgICBpZiAoZGVsYXkgPCA1MDAgJiYgKGFic19keCA+IDEwMCB8fCBhYnNfZHkgPiAxMDApKQ0KICAgIHsNCiAgICAgIGlmIChhYnNfZHggPiAwLjUgKiBhYnNfZHkpDQogICAgICB7DQogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCg0KICAgICAgICBpZiAoZHggPCAwKQ0KICAgICAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKHRydWUpOw0KICAgICAgICBlbHNlDQogICAgICAgICAgdzNjX3NsaWR5LnByZXZpb3VzX3NsaWRlKHRydWUpOw0KICAgICAgfQ0KICAgICAgZWxzZSBpZiAoYWJzX2R5ID4gMiAqIGFic19keCkNCiAgICAgIHsNCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICB3M2Nfc2xpZHkudG9nZ2xlX3RhYmxlX29mX2NvbnRlbnRzKCk7DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIC8vICMjIyBPQlNPTEVURSAjIyMNCiAgYmVmb3JlX3ByaW50OiBmdW5jdGlvbiAoKSB7DQogICAgdGhpcy5zaG93X2FsbF9zbGlkZXMoKTsNCiAgICB0aGlzLmhpZGVfdG9vbGJhcigpOw0KICAgIGFsZXJ0KCJiZWZvcmUgcHJpbnQiKTsNCiAgfSwNCg0KICAvLyAjIyMgT0JTT0xFVEUgIyMjDQogIGFmdGVyX3ByaW50OiBmdW5jdGlvbiAoKSB7DQogICAgaWYgKCF0aGlzLnZpZXdfYWxsKQ0KICAgIHsNCiAgICAgIHRoaXMuc2luZ2xlX3NsaWRlX3ZpZXcoKTsNCiAgICAgIHRoaXMuc2hvd190b29sYmFyKCk7DQogICAgfQ0KICAgIGFsZXJ0KCJhZnRlciBwcmludCIpOw0KICB9LA0KDQogIC8vICMjIyBPQlNPTEVURSAjIyMNCiAgcHJpbnRfc2xpZGVzOiBmdW5jdGlvbiAoKSB7DQogICAgdGhpcy5iZWZvcmVfcHJpbnQoKTsNCiAgICB3aW5kb3cucHJpbnQoKTsNCiAgICB0aGlzLmFmdGVyX3ByaW50KCk7DQogIH0sDQoNCiAgLy8gIyMjIE9CU09MRVRFID8/ICMjIw0KICB0b2dnbGVfdmlldzogZnVuY3Rpb24gKCkgew0KICAgIGlmICh0aGlzLnZpZXdfYWxsKQ0KICAgIHsNCiAgICAgIHRoaXMuc2luZ2xlX3NsaWRlX3ZpZXcoKTsNCiAgICAgIHRoaXMuc2hvd190b29sYmFyKCk7DQogICAgICB0aGlzLnZpZXdfYWxsID0gMDsNCiAgICB9DQogICAgZWxzZQ0KICAgIHsNCiAgICAgIHRoaXMuc2hvd19hbGxfc2xpZGVzKCk7DQogICAgICB0aGlzLmhpZGVfdG9vbGJhcigpOw0KICAgICAgdGhpcy52aWV3X2FsbCA9IDE7DQogICAgfQ0KICB9LA0KDQogIC8vIHByZXBhcmUgZm9yIHByaW50aW5nICAjIyMgT0JTT0xFVEUgIyMjDQogIHNob3dfYWxsX3NsaWRlczogZnVuY3Rpb24gKCkgew0KICAgIHRoaXMucmVtb3ZlX2NsYXNzKGRvY3VtZW50LmJvZHksICJzaW5nbGVfc2xpZGUiKTsNCiAgICB0aGlzLnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgidmlzaWJsZSIpOw0KICB9LA0KDQogIC8vIHJlc3RvcmUgYWZ0ZXIgcHJpbnRpbmcgICMjIyBPQlNPTEVURSAjIyMNCiAgc2luZ2xlX3NsaWRlX3ZpZXc6IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLmFkZF9jbGFzcyhkb2N1bWVudC5ib2R5LCAic2luZ2xlX3NsaWRlIik7DQogICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsNCiAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7DQogIH0sDQoNCiAgLy8gc3VwcHJlc3MgSUUncyBpbWFnZSB0b29sYmFyIHBvcCB1cA0KICBoaWRlX2ltYWdlX3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAoIXRoaXMubnNfcG9zKQ0KICAgIHsNCiAgICAgIHZhciBpbWFnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiSU1HIik7DQoNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgKytpKQ0KICAgICAgICBpbWFnZXNbaV0uc2V0QXR0cmlidXRlKCJnYWxsZXJ5aW1nIiwgIm5vIik7DQogICAgfQ0KICB9LA0KDQogIHVubG9hZGVkOiBmdW5jdGlvbiAoZSkgew0KICAgIC8vYWxlcnQoInVubG9hZGVkIik7DQogIH0sDQoNCiAgLy8gU2FmYXJpIGFuZCBLb25xdWVyb3IgZG9uJ3QgeWV0IHN1cHBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSgpDQogIC8vIGFuZCB0aGV5IGFsd2F5cyByZWxvYWQgcGFnZSB3aGVuIGxvY2F0aW9uLmhyZWYgaXMgdXBkYXRlZA0KICBpc19LSFRNTDogZnVuY3Rpb24gKCkgew0KICAgIHZhciBhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7DQogICAgcmV0dXJuIChhZ2VudC5pbmRleE9mKCJLSFRNTCIpID49IDAgPyB0cnVlIDogZmFsc2UpOw0KICB9LA0KDQogIC8vIGZpbmQgc2xpZGUgbmFtZSBmcm9tIGZpcnN0IGgxIGVsZW1lbnQNCiAgLy8gZGVmYXVsdCB0byBkb2N1bWVudCB0aXRsZSArIHNsaWRlIG51bWJlcg0KICBzbGlkZV9uYW1lOiBmdW5jdGlvbiAoaW5kZXgpIHsNCiAgICB2YXIgbmFtZSA9IG51bGw7DQogICAgdmFyIHNsaWRlID0gdGhpcy5zbGlkZXNbaW5kZXhdOw0KDQogICAgdmFyIGhlYWRpbmcgPSB0aGlzLmZpbmRfaGVhZGluZyhzbGlkZSk7DQoNCiAgICBpZiAoaGVhZGluZykNCiAgICAgIG5hbWUgPSB0aGlzLmV4dHJhY3RfdGV4dChoZWFkaW5nKTsNCg0KICAgIGlmICghbmFtZSkNCiAgICAgIG5hbWUgPSB0aGlzLnRpdGxlICsgIigiICsgKGluZGV4ICsgMSkgKyAiKSI7DQoNCiAgICBuYW1lLnJlcGxhY2UoL1wmL2csICImYW1wOyIpOw0KICAgIG5hbWUucmVwbGFjZSgvXDwvZywgIiZsdDsiKTsNCiAgICBuYW1lLnJlcGxhY2UoL1w+L2csICImZ3Q7Iik7DQoNCiAgICByZXR1cm4gbmFtZTsNCiAgfSwNCg0KICAvLyBmaW5kIGZpcnN0IGgxIGVsZW1lbnQgaW4gRE9NIHRyZWUNCiAgZmluZF9oZWFkaW5nOiBmdW5jdGlvbiAobm9kZSkgew0KICAgIGlmICghbm9kZSB8fCBub2RlLm5vZGVUeXBlICE9IDEpDQogICAgICByZXR1cm4gbnVsbDsNCg0KICAgIGlmIChub2RlLm5vZGVOYW1lID09ICJIMSIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiaDEiKQ0KICAgICAgcmV0dXJuIG5vZGU7DQoNCiAgICB2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7DQoNCiAgICB3aGlsZSAoY2hpbGQpDQogICAgew0KICAgICAgbm9kZSA9IHRoaXMuZmluZF9oZWFkaW5nKGNoaWxkKTsNCg0KICAgICAgaWYgKG5vZGUpDQogICAgICAgIHJldHVybiBub2RlOw0KDQogICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nOw0KICAgIH0NCg0KICAgIHJldHVybiBudWxsOw0KICB9LA0KDQogIC8vIHJlY3Vyc2l2ZWx5IGV4dHJhY3QgdGV4dCBmcm9tIERPTSB0cmVlDQogIGV4dHJhY3RfdGV4dDogZnVuY3Rpb24gKG5vZGUpIHsNCiAgICBpZiAoIW5vZGUpDQogICAgICByZXR1cm4gIiI7DQoNCiAgICAvLyB0ZXh0IG5vZGVzDQogICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykNCiAgICAgIHJldHVybiBub2RlLm5vZGVWYWx1ZTsNCg0KICAgIC8vIGVsZW1lbnRzDQogICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkNCiAgICB7DQogICAgICBub2RlID0gbm9kZS5maXJzdENoaWxkOw0KICAgICAgdmFyIHRleHQgPSAiIjsNCg0KICAgICAgd2hpbGUgKG5vZGUpDQogICAgICB7DQogICAgICAgIHRleHQgPSB0ZXh0ICsgdGhpcy5leHRyYWN0X3RleHQobm9kZSk7DQogICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gdGV4dDsNCiAgICB9DQoNCiAgICByZXR1cm4gIiI7DQogIH0sDQoNCiAgLy8gZmluZCBjb3B5cmlnaHQgdGV4dCBmcm9tIG1ldGEgZWxlbWVudA0KICBmaW5kX2NvcHlyaWdodDogZnVuY3Rpb24gKCkgew0KICAgIHZhciBuYW1lLCBjb250ZW50Ow0KICAgIHZhciBtZXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm1ldGEiKTsNCg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0YS5sZW5ndGg7ICsraSkNCiAgICB7DQogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsNCiAgICAgIGNvbnRlbnQgPSBtZXRhW2ldLmdldEF0dHJpYnV0ZSgiY29udGVudCIpOw0KDQogICAgICBpZiAobmFtZSA9PSAiY29weXJpZ2h0IikNCiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7DQogICAgfQ0KDQogICAgcmV0dXJuIG51bGw7DQogIH0sDQoNCiAgZmluZF9zaXplX2FkanVzdDogZnVuY3Rpb24gKCkgew0KICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7DQogICAgdmFyIG1ldGEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibWV0YSIpOw0KDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQ0KICAgIHsNCiAgICAgIG5hbWUgPSBtZXRhW2ldLmdldEF0dHJpYnV0ZSgibmFtZSIpOw0KICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7DQoNCiAgICAgIGlmIChuYW1lID09ICJmb250LXNpemUtYWRqdXN0bWVudCIpDQogICAgICAgIHJldHVybiAxICogY29udGVudDsNCiAgICB9DQoNCiAgICByZXR1cm4gMTsNCiAgfSwNCg0KICAvLyA8bWV0YSBuYW1lPSJkdXJhdGlvbiIgY29udGVudD0iMjAiIC8+ICBmb3IgMjAgbWludXRlcw0KICBmaW5kX2R1cmF0aW9uOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIG5hbWUsIGNvbnRlbnQsIG9mZnNldDsNCiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7DQoNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGEubGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgbmFtZSA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJuYW1lIik7DQogICAgICBjb250ZW50ID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoImNvbnRlbnQiKTsNCg0KICAgICAgaWYgKG5hbWUgPT0gImR1cmF0aW9uIikNCiAgICAgICAgcmV0dXJuIDYwMDAwICogY29udGVudDsNCiAgICB9DQoNCiAgICByZXR1cm4gbnVsbDsNCiAgfSwNCg0KICByZXBsYWNlX2J5X25vbl9icmVha2luZ19zcGFjZTogZnVuY3Rpb24gKHN0cikgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKQ0KICAgICAgc3RyW2ldID0gMTYwOw0KICB9LA0KDQogIC8vICMjIyBDSEVDSyBNRSAjIyMgaXMgdXNlIG9mICJsaSIgb2theSBmb3IgdGV4dC9odG1sPw0KICAvLyBmb3IgWEhUTUwgZG8gd2UgYWxzbyBuZWVkIHRvIHNwZWNpZnkgbmFtZXNwYWNlPw0KICBpbml0X291dGxpbmVyOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIGl0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpIik7DQoNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKQ0KICAgIHsNCiAgICAgIHZhciB0YXJnZXQgPSBpdGVtc1tpXTsNCg0KICAgICAgaWYgKCF0aGlzLmhhc19jbGFzcyh0YXJnZXQucGFyZW50Tm9kZSwgIm91dGxpbmUiKSkNCiAgICAgICAgY29udGludWU7DQoNCiAgICAgIHRhcmdldC5vbmNsaWNrID0gdGhpcy5vdXRsaW5lX2NsaWNrOw0KLyogIyMjIG1vcmUgd29yayBuZWVkZWQgZm9yIElFNg0KICAgICAgaWYgKCF0aGlzLm5zX3BvcykNCiAgICAgIHsNCiAgICAgICAgdGFyZ2V0Lm9ubW91c2VvdmVyID0gdGhpcy5ob3Zlcl9vdXRsaW5lOw0KICAgICAgICB0YXJnZXQub25tb3VzZW91dCA9IHRoaXMudW5ob3Zlcl9vdXRsaW5lOw0KICAgICAgfQ0KKi8NCiAgICAgIGlmICh0aGlzLmZvbGRhYmxlKHRhcmdldCkpDQogICAgICB7DQogICAgICAgIHRhcmdldC5mb2xkYWJsZSA9IHRydWU7DQogICAgICAgIHRhcmdldC5vbmZvY3VzID0gZnVuY3Rpb24gKCkge3czY19zbGlkeS5vdXRsaW5lID0gdGhpczt9Ow0KICAgICAgICB0YXJnZXQub25ibHVyID0gZnVuY3Rpb24gKCkge3czY19zbGlkeS5vdXRsaW5lID0gbnVsbDt9Ow0KDQogICAgICAgIGlmICghdGFyZ2V0LmdldEF0dHJpYnV0ZSgidGFiaW5kZXgiKSkNCiAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsICIwIik7DQoNCiAgICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKHRhcmdldCwgImV4cGFuZCIpKQ0KICAgICAgICAgIHRoaXMudW5mb2xkKHRhcmdldCk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICB0aGlzLmZvbGQodGFyZ2V0KTsNCiAgICAgIH0NCiAgICAgIGVsc2UNCiAgICAgIHsNCiAgICAgICAgdGhpcy5hZGRfY2xhc3ModGFyZ2V0LCAibm9mb2xkIik7DQogICAgICAgIHRhcmdldC52aXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgdGFyZ2V0LmZvbGRhYmxlID0gZmFsc2U7DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIGZvbGRhYmxlOiBmdW5jdGlvbiAoaXRlbSkgew0KICAgIGlmICghaXRlbSB8fCBpdGVtLm5vZGVUeXBlICE9IDEpDQogICAgICByZXR1cm4gZmFsc2U7DQoNCiAgICB2YXIgbm9kZSA9IGl0ZW0uZmlyc3RDaGlsZDsNCg0KICAgIHdoaWxlIChub2RlKQ0KICAgIHsNCiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgdGhpcy5pc19ibG9jayhub2RlKSkNCiAgICAgICAgcmV0dXJuIHRydWU7DQoNCiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOw0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCiAgfSwNCg0KICAvLyAjIyMgQ0hFQ0sgTUUgIyMjIHN3aXRjaCB0byBhZGQvcmVtb3ZlICJoaWRkZW4iIGNsYXNzDQogIGZvbGQ6IGZ1bmN0aW9uIChpdGVtKSB7DQogICAgaWYgKGl0ZW0pDQogICAgew0KICAgICAgdGhpcy5yZW1vdmVfY2xhc3MoaXRlbSwgInVuZm9sZGVkIik7DQogICAgICB0aGlzLmFkZF9jbGFzcyhpdGVtLCAiZm9sZGVkIik7DQogICAgfQ0KDQogICAgdmFyIG5vZGUgPSBpdGVtID8gaXRlbS5maXJzdENoaWxkIDogbnVsbDsNCg0KICAgIHdoaWxlIChub2RlKQ0KICAgIHsNCiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgdGhpcy5pc19ibG9jayhub2RlKSkgLy8gZWxlbWVudA0KICAgICAgew0KICAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyhub2RlLCAiaGlkZGVuIik7DQogICAgICB9DQoNCiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOw0KICAgIH0NCg0KICAgIGl0ZW0udmlzaWJsZSA9IGZhbHNlOw0KICB9LA0KDQogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MNCiAgdW5mb2xkOiBmdW5jdGlvbiAoaXRlbSkgew0KICAgIGlmIChpdGVtKQ0KICAgIHsNCiAgICAgIHRoaXMuYWRkX2NsYXNzKGl0ZW0sICJ1bmZvbGRlZCIpOw0KICAgICAgdGhpcy5yZW1vdmVfY2xhc3MoaXRlbSwgImZvbGRlZCIpOw0KICAgIH0NCg0KICAgIHZhciBub2RlID0gaXRlbSA/IGl0ZW0uZmlyc3RDaGlsZCA6IG51bGw7DQoNCiAgICB3aGlsZSAobm9kZSkNCiAgICB7DQogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIHRoaXMuaXNfYmxvY2sobm9kZSkpIC8vIGVsZW1lbnQNCiAgICAgIHsNCiAgICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyhub2RlLCAiaGlkZGVuIik7DQogICAgICB9DQoNCiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOw0KICAgIH0NCg0KICAgIGl0ZW0udmlzaWJsZSA9IHRydWU7DQogIH0sDQoNCiAgb3V0bGluZV9jbGljazogZnVuY3Rpb24gKGUpIHsNCiAgICBpZiAoIWUpDQogICAgICBlID0gd2luZG93LmV2ZW50Ow0KDQogICAgdmFyIHJpZ2h0Y2xpY2sgPSBmYWxzZTsNCiAgICB2YXIgdGFyZ2V0ID0gdzNjX3NsaWR5LmdldF90YXJnZXQoZSk7DQoNCiAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC52aXNpYmxlID09IHVuZGVmaW5lZCkNCiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOw0KDQogICAgaWYgKCF0YXJnZXQpDQogICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgIGlmIChlLndoaWNoKQ0KICAgICAgcmlnaHRjbGljayA9IChlLndoaWNoID09IDMpOw0KICAgIGVsc2UgaWYgKGUuYnV0dG9uKQ0KICAgICAgcmlnaHRjbGljayA9IChlLmJ1dHRvbiA9PSAyKTsNCg0KICAgIGlmICghcmlnaHRjbGljayAmJiB0YXJnZXQudmlzaWJsZSAhPSB1bmRlZmluZWQpDQogICAgew0KICAgICAgaWYgKHRhcmdldC5mb2xkYWJsZSkNCiAgICAgIHsNCiAgICAgICAgaWYgKHRhcmdldC52aXNpYmxlKQ0KICAgICAgICAgIHczY19zbGlkeS5mb2xkKHRhcmdldCk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHRhcmdldCk7DQogICAgICB9DQoNCiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOw0KICAgICAgZS5jYW5jZWwgPSB0cnVlOw0KICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOw0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCiAgfSwNCg0KICBhZGRfaW5pdGlhbF9wcm9tcHQ6IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgcHJvbXB0ID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7DQogICAgcHJvbXB0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaW5pdGlhbF9wcm9tcHQiKTsNCg0KICAgIHZhciBwMSA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoInAiKTsNCiAgICBwcm9tcHQuYXBwZW5kQ2hpbGQocDEpOw0KICAgIHAxLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaGVscCIpOw0KDQogICAgaWYgKHRoaXMua2V5Ym9hcmRsZXNzKQ0KICAgICAgcDEuaW5uZXJIVE1MID0gInN3aXBlIGxlZnQgdG8gbW92ZSB0byBuZXh0IHNsaWRlIjsNCiAgICBlbHNlDQogICAgICBwMS5pbm5lckhUTUwgPSAiU3BhY2UsIFJpZ2h0IEFycm93IG9yIHN3aXBlIGxlZnQgdG8gbW92ZSB0byAiICsNCiAgICAgICAgICAgICAgICAgICAgICJuZXh0IHNsaWRlLCBjbGljayBoZWxwIGJlbG93IGZvciBtb3JlIGRldGFpbHMiOw0KDQogICAgdGhpcy5hZGRfbGlzdGVuZXIocHJvbXB0LCAiY2xpY2siLCBmdW5jdGlvbiAoZSkgew0KICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwcm9tcHQpOw0KICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7DQogICAgDQogICAgICBpZiAoZS5jYW5jZWwgIT0gdW5kZWZpbmVkKQ0KICAgICAgICBlLmNhbmNlbCA9IHRydWU7DQogICAgICANCiAgICAgIGlmIChlLnJldHVyblZhbHVlICE9IHVuZGVmaW5lZCkNCiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOw0KICAgICAgDQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfSk7DQoNCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHByb21wdCk7DQogICAgdGhpcy5pbml0aWFsX3Byb21wdCA9IHByb21wdDsNCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQocHJvbXB0KTt9LCA1MDAwKTsNCiAgfSwNCg0KICBhZGRfdG9vbGJhcjogZnVuY3Rpb24gKCkgew0KICAgIHZhciBjb3VudGVyLCBwYWdlOw0KDQogICAgIHRoaXMudG9vbGJhciA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOw0KICAgICB0aGlzLnRvb2xiYXIuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJ0b29sYmFyIik7DQoNCiAgICAgLy8gYSByZWFzb25hYmx5IGJlaGF2ZWQgYnJvd3Nlcg0KICAgICBpZiAodGhpcy5uc19wb3MgfHwgIXRoaXMuaWU2KQ0KICAgICB7DQogICAgICAgdmFyIHJpZ2h0ID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7DQogICAgICAgcmlnaHQuc2V0QXR0cmlidXRlKCJzdHlsZSIsICJmbG9hdDogcmlnaHQ7IHRleHQtYWxpZ246IHJpZ2h0Iik7DQoNCiAgICAgICBjb3VudGVyID0gdGhpcy5jcmVhdGVfZWxlbWVudCgic3BhbiIpDQogICAgICAgY291bnRlci5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJzbGlkZSIpICsgIiBuL20iOw0KICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGNvdW50ZXIpOw0KICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChyaWdodCk7DQoNCiAgICAgICB2YXIgbGVmdCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOw0KICAgICAgIGxlZnQuc2V0QXR0cmlidXRlKCJzdHlsZSIsICJ0ZXh0LWFsaWduOiBsZWZ0Iik7DQoNCiAgICAgICAvLyBnbG9iYWwgZW5kIG9mIHNsaWRlIGluZGljYXRvcg0KICAgICAgIHRoaXMuZW9zID0gdGhpcy5jcmVhdGVfZWxlbWVudCgic3BhbiIpOw0KICAgICAgIHRoaXMuZW9zLmlubmVySFRNTCA9ICIqICI7DQogICAgICAgbGVmdC5hcHBlbmRDaGlsZCh0aGlzLmVvcyk7DQoNCiAgICAgICB2YXIgaGVscCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsNCiAgICAgICBoZWxwLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHRoaXMuaGVscF9wYWdlKTsNCiAgICAgICBoZWxwLnNldEF0dHJpYnV0ZSgidGl0bGUiLCB0aGlzLmxvY2FsaXplKHRoaXMuaGVscF90ZXh0KSk7DQogICAgICAgaGVscC5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJoZWxwPyIpOw0KICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoaGVscCk7DQogICAgICAgaGVscC5zdHlsZS5kaXNwbGF5PSJub25lIjsgDQogICAgICAgdGhpcy5oZWxwX2FuY2hvciA9IGhlbHA7ICAvLyBzYXZlIGZvciBmb2N1cyBoYWNrDQoNCiAgICAgICB2YXIgZ2FwMSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIgIik7DQogICAgICAgbGVmdC5hcHBlbmRDaGlsZChnYXAxKTsNCg0KICAgICAgIHZhciBjb250ZW50cyA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsNCiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoImhyZWYiLCAiamF2YXNjcmlwdDp3M2Nfc2xpZHkudG9nZ2xlX3RhYmxlX29mX2NvbnRlbnRzKCkiKTsNCiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiKSk7DQogICAgICAgY29udGVudHMuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiQ29udGVudHMiKTsNCiAgICAgICBsZWZ0LmFwcGVuZENoaWxkKGNvbnRlbnRzKTsNCg0KICAgICAgIHZhciBnYXAyID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKTsNCiAgICAgICBsZWZ0LmFwcGVuZENoaWxkKGdhcDIpOw0KDQogICAgICAgdmFyIGNvcHlyaWdodCA9IHRoaXMuZmluZF9jb3B5cmlnaHQoKTsNCg0KICAgICAgIGlmIChjb3B5cmlnaHQpDQogICAgICAgew0KICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7DQogICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICJjb3B5cmlnaHQiOw0KICAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSBjb3B5cmlnaHQ7DQogICAgICAgICBsZWZ0LmFwcGVuZENoaWxkKHNwYW4pOw0KICAgICAgIH0NCg0KICAgICAgIHRoaXMudG9vbGJhci5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwgIjAiKTsNCiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQobGVmdCk7DQogICAgIH0NCiAgICAgZWxzZSAvLyBJRTYgc28gbmVlZCB0byB3b3JrIGFyb3VuZCBpdHMgcG9vciBDU1Mgc3VwcG9ydA0KICAgICB7DQogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnBvc2l0aW9uID0gKHRoaXMuaWU3ID8gImZpeGVkIiA6ICJhYnNvbHV0ZSIpOw0KICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS56SW5kZXggPSAiMjAwIjsNCiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUud2lkdGggPSAiOTkuOSUiOw0KICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5oZWlnaHQgPSAiMS4yZW0iOw0KICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS50b3AgPSAiYXV0byI7DQogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmJvdHRvbSA9ICIwIjsNCiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUubGVmdCA9ICIwIjsNCiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUucmlnaHQgPSAiMCI7DQogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnRleHRBbGlnbiA9ICJsZWZ0IjsNCiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuZm9udFNpemUgPSAiNjAlIjsNCiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuY29sb3IgPSAicmVkIjsNCiAgICAgICB0aGlzLnRvb2xiYXIuYm9yZGVyV2lkdGggPSAwOw0KICAgICAgIHRoaXMudG9vbGJhci5jbGFzc05hbWUgPSAidG9vbGJhciI7DQogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmJhY2tncm91bmQgPSAicmdiKDI0MCwyNDAsMjQwKSI7DQoNCiAgICAgICAvLyB3b3VsZCBsaWtlIHRvIGhhdmUgaGVscCB0ZXh0IGxlZnQgYWxpZ25lZA0KICAgICAgIC8vIGFuZCBwYWdlIGNvdW50ZXIgcmlnaHQgYWxpZ25lZCwgZmxvYXRpbmcNCiAgICAgICAvLyBkaXYncyBkb24ndCB3b3JrLCBzbyBpbnN0ZWFkIHVzZSBuZXN0ZWQNCiAgICAgICAvLyBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQgZGl2J3MuDQoNCiAgICAgICB2YXIgc3AgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7DQogICAgICAgc3AuaW5uZXJIVE1MID0gIiZuYnNwOyZuYnNwOyombmJzcDsiOw0KICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChzcCk7DQogICAgICAgdGhpcy5lb3MgPSBzcDsgIC8vIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3INCg0KICAgICAgIHZhciBoZWxwID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiYSIpOw0KICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJocmVmIiwgdGhpcy5oZWxwX3BhZ2UpOw0KICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIHRoaXMubG9jYWxpemUodGhpcy5oZWxwX3RleHQpKTsNCiAgICAgICBoZWxwLmlubmVySFRNTCA9IHRoaXMubG9jYWxpemUoImhlbHA/Iik7DQogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGhlbHApOw0KICAgICAgIHRoaXMuaGVscF9hbmNob3IgPSBoZWxwOyAgLy8gc2F2ZSBmb3IgZm9jdXMgaGFjaw0KDQogICAgICAgdmFyIGdhcDEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOw0KICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChnYXAxKTsNCg0KICAgICAgIHZhciBjb250ZW50cyA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsNCiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoImhyZWYiLCAiamF2YXNjcmlwdDp0b2dnbGVUYWJsZU9mQ29udGVudHMoKSIpOw0KICAgICAgIGNvbnRlbnRzLnNldEF0dHJpYnV0ZSgidGl0bGUiLCB0aGlzLmxvY2FsaXplKCJ0YWJsZSBvZiBjb250ZW50cyIubG9jYWxpemUpKTsNCiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJjb250ZW50cz8iKTsNCiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoY29udGVudHMpOw0KDQogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOw0KICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChnYXAyKTsNCg0KICAgICAgIHZhciBjb3B5cmlnaHQgPSB0aGlzLmZpbmRfY29weXJpZ2h0KCk7DQoNCiAgICAgICBpZiAoY29weXJpZ2h0KQ0KICAgICAgIHsNCiAgICAgICAgIHZhciBzcGFuID0gdGhpcy5jcmVhdGVfZWxlbWVudCgic3BhbiIpOw0KICAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSBjb3B5cmlnaHQ7DQogICAgICAgICBzcGFuLnN0eWxlLmNvbG9yID0gImJsYWNrIjsNCiAgICAgICAgIHNwYW4uc3R5bGUubWFyZ2luTGVmdCA9ICIwLjVlbSI7DQogICAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoc3Bhbik7DQogICAgICAgfQ0KDQogICAgICAgY291bnRlciA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpDQogICAgICAgY291bnRlci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7DQogICAgICAgY291bnRlci5zdHlsZS53aWR0aCA9ICJhdXRvIjsgLy8iMjAlIjsNCiAgICAgICBjb3VudGVyLnN0eWxlLmhlaWdodCA9ICIxLjJlbSI7DQogICAgICAgY291bnRlci5zdHlsZS50b3AgPSAiYXV0byI7DQogICAgICAgY291bnRlci5zdHlsZS5ib3R0b20gPSAwOw0KICAgICAgIGNvdW50ZXIuc3R5bGUucmlnaHQgPSAiMCI7DQogICAgICAgY291bnRlci5zdHlsZS50ZXh0QWxpZ24gPSAicmlnaHQiOw0KICAgICAgIGNvdW50ZXIuc3R5bGUuY29sb3IgPSAicmVkIjsNCiAgICAgICBjb3VudGVyLnN0eWxlLmJhY2tncm91bmQgPSAicmdiKDI0MCwyNDAsMjQwKSI7DQoNCiAgICAgICBjb3VudGVyLmlubmVySFRNTCA9IHRoaXMubG9jYWxpemUoInNsaWRlIikgKyAiIG4vbSI7DQogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGNvdW50ZXIpOw0KICAgICB9DQoNCiAgICAgLy8gZW5zdXJlIHRoYXQgY2xpY2sgaXNuJ3QgcGFzc2VkIHRocm91Z2ggdG8gdGhlIHBhZ2UNCiAgICAgdGhpcy50b29sYmFyLm9uY2xpY2sgPQ0KICAgICAgICAgZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgaWYgKCFlKQ0KICAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7DQoNCiAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0Ow0KDQogICAgICAgICAgIGlmICghdGFyZ2V0ICYmIGUuc3JjRWxlbWVudCkNCiAgICAgICAgICAgICB0YXJnZXQgPSBlLnNyY0VsZW1lbnQ7DQoNCiAgICAgICAgICAgLy8gd29yayBhcm91bmQgU2FmYXJpIGJ1Zw0KICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5ub2RlVHlwZSA9PSAzKQ0KICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOw0KDQogICAgICAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOw0KDQogICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT0gImEiKQ0KICAgICAgICAgICAgIHczY19zbGlkeS5tb3VzZV9idXR0b25fY2xpY2soZSk7DQogICAgICAgICB9Ow0KDQogICAgIHRoaXMuc2xpZGVfbnVtYmVyX2VsZW1lbnQgPSBjb3VudGVyOw0KICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKGZhbHNlKTsNCiAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnRvb2xiYXIpOw0KICB9LA0KDQogIC8vIHd5c2l3eWcgZWRpdG9ycyBtYWtlIGl0IGhhcmQgdG8gdXNlIGRpdiBlbGVtZW50cw0KICAvLyBlLmcuIGFtYXlhIGxvc2VzIHRoZSBkaXYgd2hlbiB5b3UgY29weSBhbmQgcGFzdGUNCiAgLy8gdGhpcyBmdW5jdGlvbiB3cmFwcyBkaXYgZWxlbWVudHMgYXJvdW5kIGltcGxpY2l0DQogIC8vIHNsaWRlcyB3aGljaCBzdGFydCB3aXRoIGFuIGgxIGVsZW1lbnQgYW5kIGNvbnRpbnVlDQogIC8vIHVwIHRvIHRoZSBuZXh0IGhlYWRpbmcgb3IgZGl2IGVsZW1lbnQNCiAgd3JhcF9pbXBsaWNpdF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgaSwgaGVhZGluZywgbm9kZSwgbmV4dCwgZGl2Ow0KICAgIHZhciBoZWFkaW5ncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoMSIpOw0KDQogICAgaWYgKCFoZWFkaW5ncykNCiAgICAgIHJldHVybjsNCg0KICAgIGZvciAoaSA9IDA7IGkgPCBoZWFkaW5ncy5sZW5ndGg7ICsraSkNCiAgICB7DQogICAgICBoZWFkaW5nID0gaGVhZGluZ3NbaV07DQoNCiAgICAgIGlmIChoZWFkaW5nLnBhcmVudE5vZGUgIT0gZG9jdW1lbnQuYm9keSkNCiAgICAgICAgY29udGludWU7DQoNCiAgICAgIG5vZGUgPSBoZWFkaW5nLm5leHRTaWJsaW5nOw0KDQogICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgIHRoaXMuYWRkX2NsYXNzKGRpdiwgInNsaWRlIik7DQogICAgICBkb2N1bWVudC5ib2R5LnJlcGxhY2VDaGlsZChkaXYsIGhlYWRpbmcpOw0KICAgICAgZGl2LmFwcGVuZENoaWxkKGhlYWRpbmcpOw0KDQogICAgICB3aGlsZSAobm9kZSkNCiAgICAgIHsNCiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkgLy8gYW4gZWxlbWVudA0KICAgICAgICB7DQogICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09ICJIMSIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiaDEiKQ0KICAgICAgICAgICAgIGJyZWFrOw0KDQogICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09ICJESVYiIHx8IG5vZGUubm9kZU5hbWUgPT0gImRpdiIpDQogICAgICAgICAgIHsNCiAgICAgICAgICAgICBpZiAodGhpcy5oYXNfY2xhc3Mobm9kZSwgInNsaWRlIikpDQogICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhub2RlLCAiaGFuZG91dCIpKQ0KICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nOw0KICAgICAgICBub2RlID0gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKTsNCiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG5vZGUpOw0KICAgICAgICBub2RlID0gbmV4dDsNCiAgICAgIH0gDQogICAgfQ0KICB9LA0KDQogIGF0dGFjaF90b3VjaF9oYW5kZXJzOiBmdW5jdGlvbihzbGlkZXMpDQogIHsNCiAgICB2YXIgaSwgc2xpZGU7DQoNCiAgICBmb3IgKGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgKytpKQ0KICAgIHsNCiAgICAgIHNsaWRlID0gc2xpZGVzW2ldOw0KICAgICAgdGhpcy5hZGRfbGlzdGVuZXIoc2xpZGUsICJ0b3VjaHN0YXJ0IiwgdGhpcy50b3VjaHN0YXJ0KTsNCiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2htb3ZlIiwgdGhpcy50b3VjaG1vdmUpOw0KICAgICAgdGhpcy5hZGRfbGlzdGVuZXIoc2xpZGUsICJ0b3VjaGVuZCIsIHRoaXMudG91Y2hlbmQpOw0KICAgIH0NCiAgfSwNCg0KLy8gcmV0dXJuIG5ldyBhcnJheSBvZiBhbGwgc2xpZGVzDQogIGNvbGxlY3Rfc2xpZGVzOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHNsaWRlcyA9IG5ldyBBcnJheSgpOw0KICAgIHZhciBkaXZzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2Iik7DQoNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdnMubGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOw0KDQogICAgICBpZiAodGhpcy5oYXNfY2xhc3MoZGl2LCAic2xpZGUiKSkNCiAgICAgIHsNCiAgICAgICAgLy8gYWRkIHNsaWRlIHRvIGNvbGxlY3Rpb24NCiAgICAgICAgc2xpZGVzW3NsaWRlcy5sZW5ndGhdID0gZGl2Ow0KDQogICAgICAgIC8vIGhpZGUgZWFjaCBzbGlkZSBhcyBpdCBpcyBmb3VuZA0KICAgICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJoaWRkZW4iKTsNCg0KICAgICAgICAvLyBhZGQgZHVtbXkgPGJyLz4gYXQgZW5kIGZvciBzY3JvbGxpbmcgaGFjaw0KICAgICAgICB2YXIgbm9kZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOw0KICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZTEpOw0KICAgICAgICB2YXIgbm9kZTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOw0KICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZTIpOw0KICAgICAgfQ0KICAgICAgZWxzZSBpZiAodGhpcy5oYXNfY2xhc3MoZGl2LCAiYmFja2dyb3VuZCIpKQ0KICAgICAgeyAgLy8gd29yayBhcm91bmQgZm9yIEZpcmVmb3ggU1ZHIHJlbG9hZCBidWcNCiAgICAgICAgLy8gd2hpY2ggb3RoZXJ3aXNlIHJlcGxhY2VzIDFzdCBTVkcgZ3JhcGhpYyB3aXRoIDJuZA0KICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB9DQogICAgfQ0KDQogICAgdGhpcy5zbGlkZXMgPSBzbGlkZXM7DQogIH0sDQoNCiAgLy8gcmV0dXJuIG5ldyBhcnJheSBvZiBhbGwgPGRpdiBjbGFzcz0iaGFuZG91dCI+DQogIGNvbGxlY3Rfbm90ZXM6IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgbm90ZXMgPSBuZXcgQXJyYXkoKTsNCiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOw0KDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXZzLmxlbmd0aDsgKytpKQ0KICAgIHsNCiAgICAgIGRpdiA9IGRpdnMuaXRlbShpKTsNCg0KICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgImhhbmRvdXQiKSkNCiAgICAgIHsNCiAgICAgICAgLy8gYWRkIG5vdGUgdG8gY29sbGVjdGlvbg0KICAgICAgICBub3Rlc1tub3Rlcy5sZW5ndGhdID0gZGl2Ow0KDQogICAgICAgIC8vIGFuZCBoaWRlIGl0DQogICAgICAgIHRoaXMuYWRkX2NsYXNzKGRpdiwgImhpZGRlbiIpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHRoaXMubm90ZXMgPSBub3RlczsNCiAgfSwNCg0KICAvLyByZXR1cm4gbmV3IGFycmF5IG9mIGFsbCA8ZGl2IGNsYXNzPSJiYWNrZ3JvdW5kIj4NCiAgLy8gaW5jbHVkaW5nIG5hbWVkIGJhY2tncm91bmRzIGUuZy4gY2xhc3M9ImJhY2tncm91bmQgdGl0bGVwYWdlIg0KICBjb2xsZWN0X2JhY2tncm91bmRzOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIGJhY2tncm91bmRzID0gbmV3IEFycmF5KCk7DQogICAgdmFyIGRpdnMgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsNCg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkNCiAgICB7DQogICAgICBkaXYgPSBkaXZzLml0ZW0oaSk7DQoNCiAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJiYWNrZ3JvdW5kIikpDQogICAgICB7DQogICAgICAgIC8vIGFkZCBiYWNrZ3JvdW5kIHRvIGNvbGxlY3Rpb24NCiAgICAgICAgYmFja2dyb3VuZHNbYmFja2dyb3VuZHMubGVuZ3RoXSA9IGRpdjsNCg0KICAgICAgICAvLyBhbmQgaGlkZSBpdA0KICAgICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJoaWRkZW4iKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICB0aGlzLmJhY2tncm91bmRzID0gYmFja2dyb3VuZHM7DQogIH0sDQoNCiAgLy8gc2V0IGNsaWNrIGhhbmRsZXJzIG9uIGFsbCBhbmNob3JzDQogIHBhdGNoX2FuY2hvcnM6IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgc2VsZiA9IHczY19zbGlkeTsNCiAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgLy8gY29tcGFyZSB0aGlzLmhyZWYgd2l0aCBsb2NhdGlvbi5ocmVmDQogICAgICAvLyBmb3IgbGluayB0byBhbm90aGVyIHNsaWRlIGluIHRoaXMgZG9jDQoNCiAgICAgIGlmIChzZWxmLnBhZ2VfYWRkcmVzcyh0aGlzLmhyZWYpID09IHNlbGYucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpKQ0KICAgICAgew0KICAgICAgICAvLyB5ZXMsIHNvIGZpbmQgbmV3IHNsaWRlIG51bWJlcg0KICAgICAgICB2YXIgbmV3c2xpZGVudW0gPSBzZWxmLmZpbmRfc2xpZGVfbnVtYmVyKHRoaXMuaHJlZik7DQoNCiAgICAgICAgaWYgKG5ld3NsaWRlbnVtICE9IHNlbGYuc2xpZGVfbnVtYmVyKQ0KICAgICAgICB7DQogICAgICAgICAgdmFyIHNsaWRlID0gc2VsZi5zbGlkZXNbc2VsZi5zbGlkZV9udW1iZXJdOw0KICAgICAgICAgIHNlbGYuaGlkZV9zbGlkZShzbGlkZSk7DQogICAgICAgICAgc2VsZi5zbGlkZV9udW1iZXIgPSBuZXdzbGlkZW51bTsNCiAgICAgICAgICBzbGlkZSA9IHNlbGYuc2xpZGVzW3NlbGYuc2xpZGVfbnVtYmVyXTsNCiAgICAgICAgICBzZWxmLnNob3dfc2xpZGUoc2xpZGUpOw0KICAgICAgICAgIHNlbGYuc2V0X2xvY2F0aW9uKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGVsc2UNCiAgICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZXZlbnQpOw0KDQovLyAgICAgIGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09IG51bGwpDQovLyAgICAgICAgbG9jYXRpb24uaHJlZiA9IHRoaXMuaHJlZjsNCg0KICAgICAgdGhpcy5ibHVyKCk7DQogICAgICBzZWxmLmRpc2FibGVfc2xpZGVfY2xpY2sgPSB0cnVlOw0KICAgIH07DQoNCiAgICB2YXIgYW5jaG9ycyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKTsNCg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5jaG9ycy5sZW5ndGg7ICsraSkNCiAgICB7DQogICAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpDQogICAgICAgIGFuY2hvcnNbaV0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBoYW5kbGVyLCBmYWxzZSk7DQogICAgICBlbHNlDQogICAgICAgIGFuY2hvcnNbaV0uYXR0YWNoRXZlbnQoIm9uY2xpY2siLCBoYW5kbGVyKTsNCiAgICB9DQogIH0sDQoNCiAgLy8gIyMjIENIRUNLIE1FICMjIyBzZWUgd2hpY2ggZnVuY3Rpb25zIGFyZSBpbnZva2VkIHZpYSBzZXRUaW1lb3V0DQogIC8vIGVpdGhlciBkaXJlY3RseSBvciBpbmRpcmVjdGx5IGZvciB1c2Ugb2YgdzNjX3NsaWR5IHZzIHRoaXMNCiAgc2hvd19zbGlkZV9udW1iZXI6IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgdGltZXIgPSB3M2Nfc2xpZHkuZ2V0X3RpbWVyKCk7DQogICAgdzNjX3NsaWR5LnNsaWRlX251bWJlcl9lbGVtZW50LmlubmVySFRNTCA9IHRpbWVyICsgdzNjX3NsaWR5LmxvY2FsaXplKCJzbGlkZSIpICsgIiAiICsNCiAgICAgICAgICAgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgKyAxKSArICIvIiArIHczY19zbGlkeS5zbGlkZXMubGVuZ3RoOw0KICB9LA0KDQogIC8vIGV2ZXJ5IDIwMG1TIGNoZWNrIGlmIHRoZSBsb2NhdGlvbiBoYXMgYmVlbiBjaGFuZ2VkIGFzIGENCiAgLy8gcmVzdWx0IG9mIHRoZSB1c2VyIGFjdGl2YXRpbmcgdGhlIEJhY2sgYnV0dG9uL21lbnUgaXRlbQ0KICAvLyBkb2Vzbid0IHdvcmsgZm9yIE9wZXJhIDwgOS41DQogIGNoZWNrX2xvY2F0aW9uOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOw0KDQogICAgaWYgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwICYmIChoYXNoID09ICIiIHx8IGhhc2ggPT0gIiMiKSkNCiAgICAgIHczY19zbGlkeS5nb3RvX3NsaWRlKDApOw0KICAgIGVsc2UgaWYgKGhhc2gubGVuZ3RoID4gMiAmJiBoYXNoICE9ICIjKCIrKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkrIikiKQ0KICAgIHsNCiAgICAgIHZhciBudW0gPSBwYXJzZUludChsb2NhdGlvbi5oYXNoLnN1YnN0cigyKSk7DQoNCiAgICAgIGlmICghaXNOYU4obnVtKSkNCiAgICAgICAgdzNjX3NsaWR5LmdvdG9fc2xpZGUobnVtLTEpOw0KICAgIH0NCg0KICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ICYmIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQ0KICAgIHsNCiAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlX251bWJlcigpOw0KDQogICAgICBpZiAodzNjX3NsaWR5LnRpbWVfbGVmdCA+IDApDQogICAgICAgIHczY19zbGlkeS50aW1lX2xlZnQgLT0gMjAwOw0KICAgIH0gDQogIH0sDQoNCiAgZ2V0X3RpbWVyOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHRpbWVyID0gIiI7DQogICAgaWYgKHczY19zbGlkeS50aW1lX2xlZnQpDQogICAgew0KICAgICAgdmFyIG1pbnMsIHNlY3M7DQogICAgICBzZWNzID0gTWF0aC5mbG9vcih3M2Nfc2xpZHkudGltZV9sZWZ0LzEwMDApOw0KICAgICAgbWlucyA9IE1hdGguZmxvb3Ioc2VjcyAvIDYwKTsNCiAgICAgIHNlY3MgPSBzZWNzICUgNjA7DQogICAgICB0aW1lciA9IChtaW5zID8gbWlucysibSIgOiAiIikgKyBzZWNzICsgInMgIjsNCiAgICB9DQoNCiAgICByZXR1cm4gdGltZXI7DQogIH0sDQoNCiAgLy8gdGhpcyBkb2Vzbid0IHB1c2ggbG9jYXRpb24gb250byBoaXN0b3J5IHN0YWNrIGZvciBJRQ0KICAvLyBmb3Igd2hpY2ggYSBoaWRkZW4gaWZyYW1lIGhhY2sgaXMgbmVlZGVkOiBsb2FkIHBhZ2UgaW50bw0KICAvLyB0aGUgaWZyYW1lIHdpdGggc2NyaXB0IHRoYXQgc2V0J3MgcGFyZW50J3MgbG9jYXRpb24uaGFzaA0KICAvLyBidXQgdGhhdCB3b24ndCB3b3JrIGZvciBzdGFuZGFsb25lIHVzZSB1bmxlc3Mgd2UgY2FuDQogIC8vIGNyZWF0ZSB0aGUgcGFnZSBkeW5hbWljYWxseSB2aWEgYSBqYXZhc2NyaXB0OiBVUkwNCiAgLy8gIyMjIHVzZSBoaXN0b3J5LnB1c2hTdGF0ZSBpZiBhdmFpbGFibGUNCiAgc2V0X2xvY2F0aW9uOiBmdW5jdGlvbiAoKSB7DQogICAgIHZhciB1cmkgPSB3M2Nfc2xpZHkucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpOw0KICAgICB2YXIgaGFzaCA9ICIjKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsNCg0KICAgICBpZiAodzNjX3NsaWR5LnNsaWRlX251bWJlciA+PSAwKQ0KICAgICAgIHVyaSA9IHVyaSArIGhhc2g7DQoNCiAgICAgaWYgKHR5cGVvZihoaXN0b3J5LnB1c2hTdGF0ZSkgIT0gInVuZGVmaW5lZCIgJiYgbG9jYXRpb24ucHJvdG9jb2wgIT09ICJmaWxlOiIpDQogICAgIHsNCiAgICAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsNCiAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSgwLCBkb2N1bWVudC50aXRsZSwgaGFzaCk7DQogICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGVfbnVtYmVyKCk7DQogICAgICAgdzNjX3NsaWR5Lm5vdGlmeV9vYnNlcnZlcnMoKTsNCiAgICAgICByZXR1cm47DQogICAgIH0NCg0KICAgICBpZiAodzNjX3NsaWR5LmllICYmICh3M2Nfc2xpZHkuaWU2IHx8IHczY19zbGlkeS5pZTcpKQ0KICAgICAgIHczY19zbGlkeS5wdXNoX2hhc2goaGFzaCk7DQoNCiAgICAgaWYgKHVyaSAhPSBsb2NhdGlvbi5ocmVmKSAvLyAmJiAha2h0bWwNCiAgICAgICAgbG9jYXRpb24uaHJlZiA9IHVyaTsNCg0KICAgICBpZiAodGhpcy5raHRtbCkNCiAgICAgICAgaGFzaCA9ICIoIiArICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyKzEpICsgIikiOw0KDQogICAgIGlmICghdGhpcy5pZSAmJiBsb2NhdGlvbi5oYXNoICE9IGhhc2ggJiYgbG9jYXRpb24uaGFzaCAhPSAiIikNCiAgICAgICBsb2NhdGlvbi5oYXNoID0gaGFzaDsNCg0KICAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsNCiAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGVfbnVtYmVyKCk7DQogICAgIHczY19zbGlkeS5ub3RpZnlfb2JzZXJ2ZXJzKCk7DQogIH0sDQoNCiAgbm90aWZ5X29ic2VydmVyczogZnVuY3Rpb24gKCkNCiAgew0KICAgIHZhciBzbGlkZSA9IHRoaXMuc2xpZGVzW3RoaXMuc2xpZGVfbnVtYmVyXTsNCg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpDQogICAgICB0aGlzLm9ic2VydmVyc1tpXSh0aGlzLnNsaWRlX251bWJlcisxLCB0aGlzLmZpbmRfaGVhZGluZyhzbGlkZSkuaW5uZXJUZXh0LCBsb2NhdGlvbi5ocmVmKTsNCiAgfSwNCg0KICBhZGRfb2JzZXJ2ZXI6IGZ1bmN0aW9uIChvYnNlcnZlcikNCiAgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgaWYgKG9ic2VydmVyID09IHRoaXMub2JzZXJ2ZXJzW2ldKQ0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7DQogIH0sDQoNCiAgcmVtb3ZlX29ic2VydmVyOiBmdW5jdGlvbiAobykNCiAgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgaWYgKG9ic2VydmVyID09IHRoaXMub2JzZXJ2ZXJzW2ldKQ0KICAgICAgew0KICAgICAgICB0aGlzLm9ic2VydmVycy5zcGxpY2UoaSwxKTsNCiAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIHBhZ2VfYWRkcmVzczogZnVuY3Rpb24gKHVyaSkgew0KICAgIHZhciBpID0gdXJpLmluZGV4T2YoIiMiKTsNCg0KICAgIGlmIChpIDwgMCkNCiAgICAgIGkgPSB1cmkuaW5kZXhPZigiJTIzIik7DQoNCiAgICAvLyBjaGVjayBpZiBhbmNob3IgaXMgZW50aXJlIHBhZ2UNCg0KICAgIGlmIChpIDwgMCkNCiAgICAgIHJldHVybiB1cmk7ICAvLyB5ZXMNCg0KICAgIHJldHVybiB1cmkuc3Vic3RyKDAsIGkpOw0KICB9LA0KDQogIC8vIG9ubHkgdXNlZCBmb3IgSUU2IGFuZCBJRTcNCiAgb25fZnJhbWVfbG9hZGVkOiBmdW5jdGlvbiAoaGFzaCkgew0KICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoOw0KICAgIHZhciB1cmkgPSB3M2Nfc2xpZHkucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpOw0KICAgIGxvY2F0aW9uLmhyZWYgPSB1cmkgKyBoYXNoOw0KICB9LA0KDQogIC8vIGhpc3RvcnkgaGFjayB3aXRoIHRoYW5rcyB0byBCZXJ0cmFuZCBMZSBSb3kNCiAgcHVzaF9oYXNoOiBmdW5jdGlvbiAoaGFzaCkgew0KICAgIGlmIChoYXNoID09ICIiKSBoYXNoID0gIiMoMSkiOw0KICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoOw0KDQogICAgdmFyIGRvYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoaXN0b3J5RnJhbWUiKS5jb250ZW50V2luZG93LmRvY3VtZW50Ow0KICAgIGRvYy5vcGVuKCJqYXZhc2NyaXB0Oic8aHRtbD48L2h0bWw+JyIpOw0KICAgIGRvYy53cml0ZSgiPGh0bWw+PGhlYWQ+PHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI+d2luZG93LnBhcmVudC53M2Nfc2xpZHkub25fZnJhbWVfbG9hZGVkKCciKw0KICAgICAgKGhhc2gpICsgIicpOzwvc2NyaXB0PjwvaGVhZD48Ym9keT5oZWxsbyBtdW08L2JvZHk+PC9odG1sPiIpOw0KICAgICAgZG9jLmNsb3NlKCk7DQogIH0sDQoNCiAgLy8gZmluZCBjdXJyZW50IHNsaWRlIGJhc2VkIHVwb24gbG9jYXRpb24NCiAgLy8gZmlyc3QgZmluZCB0YXJnZXQgYW5jaG9yIGFuZCB0aGVuIGxvb2sNCiAgLy8gZm9yIGFzc29jaWF0ZWQgZGl2IGVsZW1lbnQgZW5jbG9zaW5nIGl0DQogIC8vIGZpbmFsbHkgbWFwIHRoYXQgdG8gc2xpZGUgbnVtYmVyDQogIGZpbmRfc2xpZGVfbnVtYmVyOiBmdW5jdGlvbiAodXJpKSB7DQogICAgLy8gZmlyc3QgZ2V0IGFuY2hvciBmcm9tIHBhZ2UgbG9jYXRpb24NCg0KICAgIHZhciBpID0gdXJpLmluZGV4T2YoIiMiKTsNCg0KICAgIC8vIGNoZWNrIGlmIGFuY2hvciBpcyBlbnRpcmUgcGFnZQ0KICAgIGlmIChpIDwgMCkNCiAgICAgIHJldHVybiAwOyAgLy8geWVzDQoNCiAgICB2YXIgYW5jaG9yID0gdW5lc2NhcGUodXJpLnN1YnN0cihpKzEpKTsNCg0KICAgIC8vIG5vdyB1c2UgYW5jaG9yIGFzIFhNTCBJRCB0byBmaW5kIHRhcmdldA0KICAgIHZhciB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhbmNob3IpOw0KDQogICAgaWYgKCF0YXJnZXQpDQogICAgew0KICAgICAgLy8gZG9lcyBhbmNob3IgbG9vayBsaWtlICIoMikiIGZvciBzbGlkZSAyID8/DQogICAgICAvLyB3aGVyZSBmaXJzdCBzbGlkZSBpcyAoMSkNCiAgICAgIHZhciByZSA9IC9cKChcZCkrXCkvOw0KDQogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkNCiAgICAgIHsNCiAgICAgICAgdmFyIG51bSA9IHBhcnNlSW50KGFuY2hvci5zdWJzdHJpbmcoMSwgYW5jaG9yLmxlbmd0aC0xKSk7DQoNCiAgICAgICAgaWYgKG51bSA+IHRoaXMuc2xpZGVzLmxlbmd0aCkNCiAgICAgICAgICBudW0gPSAxOw0KDQogICAgICAgIGlmICgtLW51bSA8IDApDQogICAgICAgICAgbnVtID0gMDsNCg0KICAgICAgICByZXR1cm4gbnVtOw0KICAgICAgfQ0KDQogICAgICAvLyBhY2NlcHQgWzJdIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQ0KICAgICAgcmUgPSAvXFsoXGQpK1xdLzsNCg0KICAgICAgaWYgKGFuY2hvci5tYXRjaChyZSkpDQogICAgICB7DQogICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQoYW5jaG9yLnN1YnN0cmluZygxLCBhbmNob3IubGVuZ3RoLTEpKTsNCg0KICAgICAgICAgaWYgKG51bSA+IHRoaXMuc2xpZGVzLmxlbmd0aCkNCiAgICAgICAgICAgIG51bSA9IDE7DQoNCiAgICAgICAgIGlmICgtLW51bSA8IDApDQogICAgICAgICAgICBudW0gPSAwOw0KDQogICAgICAgICByZXR1cm4gbnVtOw0KICAgICAgfQ0KDQogICAgICAvLyBvaCBkZWFyIHVua25vd24gYW5jaG9yDQogICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICAvLyBzZWFyY2ggZm9yIGVuY2xvc2luZyBzbGlkZQ0KDQogICAgd2hpbGUgKHRydWUpDQogICAgew0KICAgICAgLy8gYnJvd3NlciBjb2VyY2VzIGh0bWwgZWxlbWVudHMgdG8gdXBwZXJjYXNlIQ0KICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09ICJkaXYiICYmDQogICAgICAgICAgICB0aGlzLmhhc19jbGFzcyh0YXJnZXQsICJzbGlkZSIpKQ0KICAgICAgew0KICAgICAgICAvLyBmb3VuZCB0aGUgc2xpZGUgZWxlbWVudA0KICAgICAgICBicmVhazsNCiAgICAgIH0NCg0KICAgICAgLy8gb3RoZXJ3aXNlIHRyeSBwYXJlbnQgZWxlbWVudCBpZiBhbnkNCg0KICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7DQoNCiAgICAgIGlmICghdGFyZ2V0KQ0KICAgICAgew0KICAgICAgICByZXR1cm4gMDsgICAvLyBubyBsdWNrIQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICBmb3IgKGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgKytpKQ0KICAgIHsNCiAgICAgIGlmIChzbGlkZXNbaV0gPT0gdGFyZ2V0KQ0KICAgICAgICByZXR1cm4gaTsgIC8vIHN1Y2Nlc3MNCiAgICB9DQoNCiAgICAvLyBvaCBkZWFyIHN0aWxsIG5vIGx1Y2sNCiAgICByZXR1cm4gMDsNCiAgfSwNCg0KICBwcmV2aW91c19zbGlkZTogZnVuY3Rpb24gKGluY3JlbWVudGFsKSB7DQogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpDQogICAgew0KICAgICAgdmFyIHNsaWRlOw0KDQogICAgICBpZiAoKGluY3JlbWVudGFsIHx8IHczY19zbGlkeS5zbGlkZV9udW1iZXIgPT0gMCkgJiYgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gIT0gbnVsbCkNCiAgICAgIHsNCiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkuaGlkZV9wcmV2aW91c19pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsNCiAgICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKGZhbHNlKTsNCiAgICAgIH0NCiAgICAgIGVsc2UgaWYgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQ0KICAgICAgew0KICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsNCg0KICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LnNsaWRlX251bWJlciAtIDE7DQogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsNCiAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgidmlzaWJsZSIpOw0KICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5wcmV2aW91c19pbmNyZW1lbnRhbF9pdGVtKG51bGwpOw0KICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7DQogICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsNCiAgICAgIH0NCg0KICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOw0KDQogICAgICBpZiAoIXczY19zbGlkeS5uc19wb3MpDQogICAgICAgIHczY19zbGlkeS5yZWZyZXNoX3Rvb2xiYXIoMjAwKTsNCiAgICB9DQogIH0sDQoNCiAgbmV4dF9zbGlkZTogZnVuY3Rpb24gKGluY3JlbWVudGFsKSB7DQogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpDQogICAgew0KICAgICAgdmFyIHNsaWRlLCBsYXN0ID0gdzNjX3NsaWR5Lmxhc3Rfc2hvd247DQoNCiAgICAgIGlmIChpbmNyZW1lbnRhbCB8fCB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID09IHczY19zbGlkeS5zbGlkZXMubGVuZ3RoIC0gMSkNCiAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gdzNjX3NsaWR5LnJldmVhbF9uZXh0X2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pOw0KDQogICAgICBpZiAoKCFpbmNyZW1lbnRhbCB8fCB3M2Nfc2xpZHkubGFzdF9zaG93biA9PSBudWxsKSAmJg0KICAgICAgICAgICAgIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPCB3M2Nfc2xpZHkuc2xpZGVzLmxlbmd0aCAtIDEpDQogICAgICB7DQogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQogICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7DQoNCiAgICAgICAgIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPSB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICsgMTsNCiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsNCiAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsNCiAgICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOw0KICAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOw0KICAgICAgfQ0KICAgICAgZWxzZSBpZiAoIXczY19zbGlkeS5sYXN0X3Nob3duKQ0KICAgICAgew0KICAgICAgICAgaWYgKGxhc3QgJiYgaW5jcmVtZW50YWwpDQogICAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbGFzdDsNCiAgICAgIH0NCg0KICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOw0KDQogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsNCg0KICAgICAgaWYgKCF3M2Nfc2xpZHkubnNfcG9zKQ0KICAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOw0KICAgICB9DQogIH0sDQoNCiAgLy8gdG8gZmlyc3Qgc2xpZGUgd2l0aCBub3RoaW5nIHJldmVhbGVkDQogIC8vIGkuZS4gc3RhdGUgYXQgc3RhcnQgb2YgcHJlc2VudGF0aW9uDQogIGZpcnN0X3NsaWRlOiBmdW5jdGlvbiAoKSB7DQogICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQ0KICAgICB7DQogICAgICAgdmFyIHNsaWRlOw0KDQogICAgICAgaWYgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgIT0gMCkNCiAgICAgICB7DQogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQogICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7DQoNCiAgICAgICAgIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPSAwOw0KICAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOw0KICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBudWxsOw0KICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7DQogICAgICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7DQogICAgICAgfQ0KDQogICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKA0KICAgICAgICAgIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsNCiAgICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7DQogICAgIH0NCiAgfSwNCg0KICAvLyBnb3RvIGxhc3Qgc2xpZGUgd2l0aCBldmVyeXRoaW5nIHJldmVhbGVkDQogIC8vIGkuZS4gc3RhdGUgYXQgZW5kIG9mIHByZXNlbnRhdGlvbg0KICBsYXN0X3NsaWRlOiBmdW5jdGlvbiAoKSB7DQogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpDQogICAgew0KICAgICAgdmFyIHNsaWRlOw0KDQogICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7IC8vcmV2ZWFsTmV4dEl0ZW0obGFzdFNob3duKTsNCg0KICAgICAgaWYgKHczY19zbGlkeS5sYXN0X3Nob3duID09IG51bGwgJiYNCiAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQ0KICAgICAgew0KICAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOw0KICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOw0KICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsNCiAgICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsNCiAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gdzNjX3NsaWR5LnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7DQoNCiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsNCiAgICAgIH0NCiAgICAgIGVsc2UNCiAgICAgIHsNCiAgICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsNCiAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gdzNjX3NsaWR5LnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7DQogICAgICB9DQoNCiAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cyh0cnVlKTsNCiAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsNCiAgICB9DQogIH0sDQoNCg0KICAvLyAjIyMgY2hlY2sgdGhpcyBhbmQgY29uc2lkZXIgYWRkL3JlbW92ZSBjbGFzcw0KICBzZXRfZW9zX3N0YXR1czogZnVuY3Rpb24gKHN0YXRlKSB7DQogICAgaWYgKHRoaXMuZW9zKQ0KICAgICAgdGhpcy5lb3Muc3R5bGUuY29sb3IgPSAoc3RhdGUgPyAicmdiKDI0MCwyNDAsMjQwKSIgOiAicmVkIik7DQogIH0sDQoNCiAgLy8gZmlyc3Qgc2xpZGUgaXMgMA0KICBnb3RvX3NsaWRlOiBmdW5jdGlvbiAobnVtKSB7DQogICAgLy9hbGVydCgiZ29pbmcgdG8gc2xpZGUgIiArIChudW0rMSkpOw0KICAgIHZhciBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOw0KICAgIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPSBudW07DQogICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOw0KICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsNCiAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsNCiAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsNCiAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsNCiAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7DQogICAgdzNjX3NsaWR5LnNob3dfc2xpZGVfbnVtYmVyKCk7DQogIH0sDQoNCg0KICBzaG93X3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsNCiAgICB0aGlzLnN5bmNfYmFja2dyb3VuZChzbGlkZSk7DQogICAgdGhpcy5yZW1vdmVfY2xhc3Moc2xpZGUsICJoaWRkZW4iKTsNCg0KICAgIC8vIHdvcmsgYXJvdW5kIElFOSBvYmplY3QgcmVuZGVyaW5nIGJ1Zw0KICAgIHNldFRpbWVvdXQoIndpbmRvdy5zY3JvbGxUbygwLDApOyIsIDEpOw0KICB9LA0KDQogIGhpZGVfc2xpZGU6IGZ1bmN0aW9uIChzbGlkZSkgew0KICAgIHRoaXMuYWRkX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7DQogIH0sDQoNCiAgc2V0X2ZvY3VzOiBmdW5jdGlvbiAoZWxlbWVudCkNCiAgew0KICAgIGlmIChlbGVtZW50KQ0KICAgICAgZWxlbWVudC5mb2N1cygpOw0KICAgIGVsc2UNCiAgICB7DQogICAgICB3M2Nfc2xpZHkuaGVscF9hbmNob3IuZm9jdXMoKTsNCg0KICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsNCiAgICAgICAgdzNjX3NsaWR5LmhlbHBfYW5jaG9yLmJsdXIoKTsNCiAgICAgIH0sIDEpOw0KICAgIH0NCiAgfSwNCg0KICAvLyBzaG93IGp1c3QgdGhlIGJhY2tncm91bmRzIHBlcnRpbmVudCB0byB0aGlzIHNsaWRlDQogIC8vIHdoZW4gc2xpZGUgYmFja2dyb3VuZC1jb2xvciBpcyB0cmFuc3BhcmVudA0KICAvLyB0aGlzIHNob3VsZCBub3cgd29yayB3aXRoIHJnYmEgY29sb3IgdmFsdWVzDQogIHN5bmNfYmFja2dyb3VuZDogZnVuY3Rpb24gKHNsaWRlKSB7DQogICAgdmFyIGJhY2tncm91bmQ7DQogICAgdmFyIGJnQ29sb3I7DQoNCiAgICBpZiAoc2xpZGUuY3VycmVudFN0eWxlKQ0KICAgICAgYmdDb2xvciA9IHNsaWRlLmN1cnJlbnRTdHlsZVsiYmFja2dyb3VuZENvbG9yIl07DQogICAgZWxzZSBpZiAoZG9jdW1lbnQuZGVmYXVsdFZpZXcpDQogICAgew0KICAgICAgdmFyIHN0eWxlcyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoc2xpZGUsbnVsbCk7DQoNCiAgICAgIGlmIChzdHlsZXMpDQogICAgICAgIGJnQ29sb3IgPSBzdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZSgiYmFja2dyb3VuZC1jb2xvciIpOw0KICAgICAgZWxzZSAvLyBicm9rZW4gaW1wbGVtZW50YXRpb24gcHJvYmFibHkgZHVlIFNhZmFyaSBvciBLb25xdWVyb3INCiAgICAgIHsNCiAgICAgICAgLy9hbGVydCgiZGVmZWN0aXZlIGltcGxlbWVudGF0aW9uIG9mIGdldENvbXB1dGVkU3R5bGUoKSIpOw0KICAgICAgICBiZ0NvbG9yID0gInRyYW5zcGFyZW50IjsNCiAgICAgIH0NCiAgICB9DQogICAgZWxzZQ0KICAgICAgYmdDb2xvciA9PSAidHJhbnNwYXJlbnQiOw0KDQogICAgaWYgKGJnQ29sb3IgPT0gInRyYW5zcGFyZW50IiB8fA0KICAgICAgICBiZ0NvbG9yLmluZGV4T2YoInJnYmEiKSA+PSAwIHx8DQogICAgICAgIGJnQ29sb3IuaW5kZXhPZigib3BhY2l0eSIpID49IDApDQogICAgew0KICAgICAgdmFyIHNsaWRlQ2xhc3MgPSB0aGlzLmdldF9jbGFzc19saXN0KHNsaWRlKTsNCg0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJhY2tncm91bmRzLmxlbmd0aDsgaSsrKQ0KICAgICAgew0KICAgICAgICBiYWNrZ3JvdW5kID0gdGhpcy5iYWNrZ3JvdW5kc1tpXTsNCg0KICAgICAgICB2YXIgYmdDbGFzcyA9IHRoaXMuZ2V0X2NsYXNzX2xpc3QoYmFja2dyb3VuZCk7DQoNCiAgICAgICAgaWYgKHRoaXMubWF0Y2hpbmdfYmFja2dyb3VuZChzbGlkZUNsYXNzLCBiZ0NsYXNzKSkNCiAgICAgICAgICB0aGlzLnJlbW92ZV9jbGFzcyhiYWNrZ3JvdW5kLCAiaGlkZGVuIik7DQogICAgICAgIGVsc2UNCiAgICAgICAgICB0aGlzLmFkZF9jbGFzcyhiYWNrZ3JvdW5kLCAiaGlkZGVuIik7DQogICAgICB9DQogICAgfQ0KICAgIGVsc2UgLy8gZm9yY2libHkgaGlkZSBhbGwgYmFja2dyb3VuZHMNCiAgICAgIHRoaXMuaGlkZV9iYWNrZ3JvdW5kcygpOw0KICB9LA0KDQogIGhpZGVfYmFja2dyb3VuZHM6IGZ1bmN0aW9uICgpIHsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYmFja2dyb3VuZHMubGVuZ3RoOyBpKyspDQogICAgew0KICAgICAgYmFja2dyb3VuZCA9IHRoaXMuYmFja2dyb3VuZHNbaV07DQogICAgICB0aGlzLmFkZF9jbGFzcyhiYWNrZ3JvdW5kLCAiaGlkZGVuIik7DQogICAgfQ0KICB9LA0KDQogIC8vIGNvbXBhcmUgY2xhc3NlcyBmb3Igc2xpZGUgYW5kIGJhY2tncm91bmQNCiAgbWF0Y2hpbmdfYmFja2dyb3VuZDogZnVuY3Rpb24gKHNsaWRlQ2xhc3MsIGJnQ2xhc3MpIHsNCiAgICB2YXIgaSwgY291bnQsIHBhdHRlcm4sIHJlc3VsdDsNCg0KICAgIC8vIGRlZmluZSBwYXR0ZXJuIGFzIHJlZ3VsYXIgZXhwcmVzc2lvbg0KICAgIHBhdHRlcm4gPSAvXHcrL2c7DQoNCiAgICAvLyBjaGVjayBiYWNrZ3JvdW5kIGNsYXNzIG5hbWVzDQogICAgcmVzdWx0ID0gYmdDbGFzcy5tYXRjaChwYXR0ZXJuKTsNCg0KICAgIGZvciAoaSA9IGNvdW50ID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykNCiAgICB7DQogICAgICBpZiAocmVzdWx0W2ldID09ICJoaWRkZW4iKQ0KICAgICAgICBjb250aW51ZTsNCg0KICAgICAgaWYgKHJlc3VsdFtpXSA9PSAiYmFja2dyb3VuZCIpDQoJY29udGludWU7DQoNCiAgICAgICsrY291bnQ7DQogICAgfQ0KDQogICAgaWYgKGNvdW50ID09IDApICAvLyBkZWZhdWx0IG1hdGNoDQogICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgIC8vIGNoZWNrIGZvciBtYXRjaGVzIGFuZCBwbGFjZSByZXN1bHQgaW4gYXJyYXkNCiAgICByZXN1bHQgPSBzbGlkZUNsYXNzLm1hdGNoKHBhdHRlcm4pOw0KDQogICAgLy8gbm93IGNoZWNrIGlmIGRlc2lyZWQgbmFtZSBpcyBwcmVzZW50IGZvciBiYWNrZ3JvdW5kDQogICAgZm9yIChpID0gY291bnQgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKQ0KICAgIHsNCiAgICAgIGlmIChyZXN1bHRbaV0gPT0gImhpZGRlbiIpDQogICAgICAgIGNvbnRpbnVlOw0KDQogICAgICBpZiAodGhpcy5oYXNfdG9rZW4oYmdDbGFzcywgcmVzdWx0W2ldKSkNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcmV0dXJuIGZhbHNlOw0KICB9LA0KDQogIHJlc2l6ZWQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgdmFyIHdpZHRoID0gMDsNCg0KICAgICBpZiAoIHR5cGVvZiggd2luZG93LmlubmVyV2lkdGggKSA9PSAnbnVtYmVyJyApDQogICAgICAgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsgIC8vIE5vbiBJRSBicm93c2VyDQogICAgIGVsc2UgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpDQogICAgICAgd2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7ICAvLyBJRTYNCiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKQ0KICAgICAgIHdpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsgLy8gSUU0DQoNCiAgICAgdmFyIGhlaWdodCA9IDA7DQoNCiAgICAgaWYgKCB0eXBlb2YoIHdpbmRvdy5pbm5lckhlaWdodCApID09ICdudW1iZXInICkNCiAgICAgICBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7ICAvLyBOb24gSUUgYnJvd3Nlcg0KICAgICBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkNCiAgICAgICBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OyAgLy8gSUU2DQogICAgIGVsc2UgaWYgKGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQpDQogICAgICAgaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7IC8vIElFNA0KDQogICAgIGlmIChoZWlnaHQgJiYgKHdpZHRoL2hlaWdodCA+IDEuMDUqMTAyNC83NjgpKQ0KICAgICB7DQogICAgICAgd2lkdGggPSBoZWlnaHQgKiAxMDI0LjAvNzY4Ow0KICAgICB9DQoNCiAgICAgLy8gSUUgZmlyZXMgb25yZXNpemUgZXZlbiB3aGVuIG9ubHkgZm9udCBzaXplIGlzIGNoYW5nZWQhDQogICAgIC8vIHNvIHdlIGRvIGEgY2hlY2sgdG8gYXZvaWQgYmxvY2tpbmcgPCBhbmQgPiBhY3Rpb25zDQogICAgIGlmICh3aWR0aCAhPSB3M2Nfc2xpZHkubGFzdF93aWR0aCB8fCBoZWlnaHQgIT0gdzNjX3NsaWR5Lmxhc3RfaGVpZ2h0KQ0KICAgICB7DQogICAgICAgaWYgKHdpZHRoID49IDExMDApDQogICAgICAgICB3M2Nfc2xpZHkuc2l6ZV9pbmRleCA9IDU7ICAgIC8vIDQNCiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSAxMDAwKQ0KICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSA0OyAgICAvLyAzDQogICAgICAgZWxzZSBpZiAod2lkdGggPj0gODAwKQ0KICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSAzOyAgICAvLyAyDQogICAgICAgZWxzZSBpZiAod2lkdGggPj0gNjAwKQ0KICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSAyOyAgICAvLyAxDQogICAgICAgZWxzZSBpZiAod2lkdGgpDQogICAgICAgICB3M2Nfc2xpZHkuc2l6ZV9pbmRleCA9IDA7DQoNCiAgICAgICAvLyBhZGQgaW4gZm9udCBzaXplIGFkanVzdG1lbnQgZnJvbSBtZXRhIGVsZW1lbnQgZS5nLg0KICAgICAgIC8vIDxtZXRhIG5hbWU9ImZvbnQtc2l6ZS1hZGp1c3RtZW50IiBjb250ZW50PSItMiIgLz4NCiAgICAgICAvLyB1c2VmdWwgd2hlbiBzbGlkZXMgaGF2ZSB0b28gbXVjaCBjb250ZW50IDstKQ0KDQogICAgICAgaWYgKDAgPD0gdzNjX3NsaWR5LnNpemVfaW5kZXggKyB3M2Nfc2xpZHkuc2l6ZV9hZGp1c3RtZW50ICYmDQogICAgICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggKyB3M2Nfc2xpZHkuc2l6ZV9hZGp1c3RtZW50IDwgdzNjX3NsaWR5LnNpemVzLmxlbmd0aCkNCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gdzNjX3NsaWR5LnNpemVfaW5kZXggKyB3M2Nfc2xpZHkuc2l6ZV9hZGp1c3RtZW50Ow0KDQogICAgICAgLy8gZW5hYmxlcyBjcm9zcyBicm93c2VyIHVzZSBvZiByZWxhdGl2ZSB3aWR0aC9oZWlnaHQNCiAgICAgICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWENCiAgICAgICB3M2Nfc2xpZHkuYWRqdXN0X29iamVjdF9kaW1lbnNpb25zKHdpZHRoLCBoZWlnaHQpOw0KDQogICAgICAgaWYgKGRvY3VtZW50LmJvZHkuc3R5bGUuZm9udFNpemUgIT0gdzNjX3NsaWR5LnNpemVzW3czY19zbGlkeS5zaXplX2luZGV4XSkNCiAgICAgICB7DQogICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmZvbnRTaXplID0gdzNjX3NsaWR5LnNpemVzW3czY19zbGlkeS5zaXplX2luZGV4XTsNCiAgICAgICB9DQoNCiAgICAgICB3M2Nfc2xpZHkubGFzdF93aWR0aCA9IHdpZHRoOw0KICAgICAgIHczY19zbGlkeS5sYXN0X2hlaWdodCA9IGhlaWdodDsNCg0KICAgICAgIC8vIGZvcmNlIHJlZmxvdyB0byB3b3JrIGFyb3VuZCBNb3ppbGxhIGJ1Zw0KICAgICAgIGlmICh3M2Nfc2xpZHkubnNfcG9zKQ0KICAgICAgIHsNCiAgICAgICAgIHZhciBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQogICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7DQogICAgICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7DQogICAgICAgfQ0KDQogICAgICAgLy8gZm9yY2UgY29ycmVjdCBwb3NpdGlvbmluZyBvZiB0b29sYmFyDQogICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOw0KICAgICB9DQogIH0sDQoNCiAgc2Nyb2xsZWQ6IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAodzNjX3NsaWR5LnRvb2xiYXIgJiYgIXczY19zbGlkeS5uc19wb3MgJiYgIXczY19zbGlkeS5pZTcpDQogICAgew0KICAgICAgdzNjX3NsaWR5LmhhY2tfb2Zmc2V0ID0gdzNjX3NsaWR5LnNjcm9sbF94X29mZnNldCgpOw0KICAgICAgLy8gaGlkZSB0b29sYmFyDQogICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KDQogICAgICAvLyBtYWtlIGl0IHJlYXBwZWFyIGxhdGVyDQogICAgICBpZiAodzNjX3NsaWR5LnNjcm9sbGhhY2sgPT0gMCAmJiAhdzNjX3NsaWR5LnZpZXdfYWxsKQ0KICAgICAgew0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHt3M2Nfc2xpZHkuc2hvd190b29sYmFyKCk7IH0sIDEwMDApOw0KICAgICAgICB3M2Nfc2xpZHkuc2Nyb2xsaGFjayA9IDE7DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIGhpZGVfdG9vbGJhcjogZnVuY3Rpb24gKCkgew0KICAgIHczY19zbGlkeS5hZGRfY2xhc3ModzNjX3NsaWR5LnRvb2xiYXIsICJoaWRkZW4iKTsNCiAgICB3aW5kb3cuZm9jdXMoKTsNCiAgfSwNCg0KICAvLyB1c2VkIHRvIGVuc3VyZSBJRSByZWZyZXNoZXMgdG9vbGJhciBpbiBjb3JyZWN0IHBvc2l0aW9uDQogIHJlZnJlc2hfdG9vbGJhcjogZnVuY3Rpb24gKGludGVydmFsKSB7DQogICAgaWYgKCF3M2Nfc2xpZHkubnNfcG9zICYmICF3M2Nfc2xpZHkuaWU3KQ0KICAgIHsNCiAgICAgIHczY19zbGlkeS5oaWRlX3Rvb2xiYXIoKTsNCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge3czY19zbGlkeS5zaG93X3Rvb2xiYXIoKTt9LCBpbnRlcnZhbCk7DQogICAgfQ0KICB9LA0KDQogIC8vIHJlc3RvcmVzIHRvb2xiYXIgYWZ0ZXIgc2hvcnQgZGVsYXkNCiAgc2hvd190b29sYmFyOiBmdW5jdGlvbiAoKSB7DQogICAgaWYgKHczY19zbGlkeS53YW50X3Rvb2xiYXIpDQogICAgew0KICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoNCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykNCiAgICAgIHsNCiAgICAgICAgLy8gYWRqdXN0IHBvc2l0aW9uIHRvIGFsbG93IGZvciBzY3JvbGxpbmcNCiAgICAgICAgdmFyIHhvZmZzZXQgPSB3M2Nfc2xpZHkuc2Nyb2xsX3hfb2Zmc2V0KCk7DQogICAgICAgIHczY19zbGlkeS50b29sYmFyLnN0eWxlLmxlZnQgPSB4b2Zmc2V0Ow0KICAgICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5yaWdodCA9IHhvZmZzZXQ7DQoNCiAgICAgICAgLy8gZGV0ZXJtaW5lIHZlcnRpY2FsIHNjcm9sbCBvZmZzZXQNCiAgICAgICAgLy92YXIgeW9mZnNldCA9IHNjcm9sbFlPZmZzZXQoKTsNCg0KICAgICAgICAvLyBib3R0b20gaXMgZG9jIGhlaWdodCAtIHdpbmRvdyBoZWlnaHQgLSBzY3JvbGwgb2Zmc2V0DQogICAgICAgIC8vdmFyIGJvdHRvbSA9IGRvY3VtZW50SGVpZ2h0KCkgLSBsYXN0SGVpZ2h0IC0geW9mZnNldA0KDQogICAgICAgIC8vaWYgKHlvZmZzZXQgPiAwIHx8IGRvY3VtZW50SGVpZ2h0KCkgPiBsYXN0SGVpZ2h0KQ0KICAgICAgICAvLyAgIGJvdHRvbSArPSAxNjsgIC8vIGFsbG93IGZvciBoZWlnaHQgb2Ygc2Nyb2xsYmFyDQoNCiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUuYm90dG9tID0gMDsgLy9ib3R0b207DQogICAgICB9DQoNCiAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3ModzNjX3NsaWR5LnRvb2xiYXIsICJoaWRkZW4iKTsNCiAgICB9DQoNCiAgICB3M2Nfc2xpZHkuc2Nyb2xsaGFjayA9IDA7DQoNCg0KICAgIC8vIHNldCB0aGUga2V5Ym9hcmQgZm9jdXMgdG8gdGhlIGhlbHAgbGluayBvbiB0aGUNCiAgICAvLyB0b29sYmFyIHRvIGVuc3VyZSB0aGF0IGRvY3VtZW50IGhhcyB0aGUgZm9jdXMNCiAgICAvLyBJRSBkb2Vzbid0IGFsd2F5cyB3b3JrIHdpdGggd2luZG93LmZvY3VzKCkNCiAgICAvLyBhbmQgdGhpcyBoYWNrIGhhcyBiZW5lZml0IG9mIEVudGVyIGZvciBoZWxwDQoNCiAgICB0cnkNCiAgICB7DQogICAgICBpZiAoIXczY19zbGlkeS5vcGVyYSkNCiAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOw0KICAgIH0NCiAgICBjYXRjaCAoZSkNCiAgICB7DQogICAgfQ0KICB9LA0KDQovLyBpbnZva2VkIHZpYSBGIGtleQ0KICB0b2dnbGVfdG9vbGJhcjogZnVuY3Rpb24gKCkgew0KICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQ0KICAgIHsNCiAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKHczY19zbGlkeS50b29sYmFyLCAiaGlkZGVuIikpDQogICAgICB7DQogICAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3ModzNjX3NsaWR5LnRvb2xiYXIsICJoaWRkZW4iKQ0KICAgICAgICB3M2Nfc2xpZHkud2FudF90b29sYmFyID0gMTsNCiAgICAgIH0NCiAgICAgIGVsc2UNCiAgICAgIHsNCiAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpDQogICAgICAgIHczY19zbGlkeS53YW50X3Rvb2xiYXIgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCg0KICBzY3JvbGxfeF9vZmZzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAod2luZG93LnBhZ2VYT2Zmc2V0KQ0KICAgICAgcmV0dXJuIHNlbGYucGFnZVhPZmZzZXQ7DQoNCiAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIA0KICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KQ0KICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0Ow0KDQogICAgaWYgKGRvY3VtZW50LmJvZHkpDQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0Ow0KDQogICAgcmV0dXJuIDA7DQogIH0sDQoNCiAgc2Nyb2xsX3lfb2Zmc2V0OiBmdW5jdGlvbiAoKSB7DQogICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCkNCiAgICAgIHJldHVybiBzZWxmLnBhZ2VZT2Zmc2V0Ow0KDQogICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiANCiAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKQ0KICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7DQoNCiAgICBpZiAoZG9jdW1lbnQuYm9keSkNCiAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsNCg0KICAgIHJldHVybiAwOw0KICB9LA0KDQogIC8vIGxvb2tpbmcgZm9yIGEgd2F5IHRvIGRldGVybWluZSBoZWlnaHQgb2Ygc2xpZGUgY29udGVudA0KICAvLyB0aGUgc2xpZGUgaXRzZWxmIGlzIHNldCB0byB0aGUgaGVpZ2h0IG9mIHRoZSB3aW5kb3cNCiAgb3B0aW1pemVfZm9udF9zaXplOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsNCg0KICAgIC8vdmFyIGRoID0gZG9jdW1lbnRIZWlnaHQoKTsgLy9nZXREb2NIZWlnaHQoZG9jdW1lbnQpOw0KICAgIHZhciBkaCA9IHNsaWRlLnNjcm9sbEhlaWdodDsNCiAgICB2YXIgd2ggPSBnZXRXaW5kb3dIZWlnaHQoKTsNCiAgICB2YXIgdSA9IDEwMCAqIGRoIC8gd2g7DQoNCiAgICBhbGVydCgid2luZG93IHV0aWxpemF0aW9uID0gIiArIHUgKyAiJSAoZG9jICINCiAgICAgICsgZGggKyAiIHdpbiAiICsgd2ggKyAiKSIpOw0KICB9LA0KDQogIC8vIGZyb20gZG9jdW1lbnQgb2JqZWN0DQogIGdldF9kb2NfaGVpZ2h0OiBmdW5jdGlvbiAoZG9jKSB7DQogICAgaWYgKCFkb2MpDQogICAgICBkb2MgPSBkb2N1bWVudDsNCg0KICAgIGlmIChkb2MgJiYgZG9jLmJvZHkgJiYgZG9jLmJvZHkub2Zmc2V0SGVpZ2h0KQ0KICAgICAgcmV0dXJuIGRvYy5ib2R5Lm9mZnNldEhlaWdodDsgIC8vIG5zL2dlY2tvIHN5bnRheA0KDQogICAgaWYgKGRvYyAmJiBkb2MuYm9keSAmJiBkb2MuYm9keS5zY3JvbGxIZWlnaHQpDQogICAgICByZXR1cm4gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0Ow0KDQogICAgYWxlcnQoImNvdWxkbid0IGRldGVybWluZSBkb2N1bWVudCBoZWlnaHQiKTsNCiAgfSwNCg0KICBnZXRfd2luZG93X2hlaWdodDogZnVuY3Rpb24gKCkgew0KICAgIGlmICggdHlwZW9mKCB3aW5kb3cuaW5uZXJIZWlnaHQgKSA9PSAnbnVtYmVyJyApDQogICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0OyAgLy8gTm9uIElFIGJyb3dzZXINCg0KICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkNCiAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OyAgLy8gSUU2DQoNCiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkNCiAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsgLy8gSUU0DQogIH0sDQoNCiAgZG9jdW1lbnRfaGVpZ2h0OiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHNoLCBvaDsNCg0KICAgIHNoID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7DQogICAgb2ggPSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDsNCg0KICAgIGlmIChzaCAmJiBvaCkNCiAgICB7DQogICAgICByZXR1cm4gKHNoID4gb2ggPyBzaCA6IG9oKTsNCiAgICB9DQoNCiAgICAvLyBubyBpZGVhIQ0KICAgIHJldHVybiAwOw0KICB9LA0KDQogIHNtYWxsZXI6IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAodzNjX3NsaWR5LnNpemVfaW5kZXggPiAwKQ0KICAgIHsNCiAgICAgIC0tdzNjX3NsaWR5LnNpemVfaW5kZXg7DQogICAgfQ0KDQogICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmZvbnRTaXplID0gdzNjX3NsaWR5LnNpemVzW3czY19zbGlkeS5zaXplX2luZGV4XTsNCiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOw0KICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsNCiAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7DQogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7DQogIH0sDQoNCiAgYmlnZ2VyOiBmdW5jdGlvbiAoKSB7DQogICAgaWYgKHczY19zbGlkeS5zaXplX2luZGV4IDwgdzNjX3NsaWR5LnNpemVzLmxlbmd0aCAtIDEpDQogICAgew0KICAgICAgKyt3M2Nfc2xpZHkuc2l6ZV9pbmRleDsNCiAgICB9DQoNCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuZm9udFNpemUgPSB3M2Nfc2xpZHkuc2l6ZXNbdzNjX3NsaWR5LnNpemVfaW5kZXhdOw0KICAgIHZhciBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOw0KICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsNCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHt3M2Nfc2xpZHkuc2hvd190b29sYmFyKCk7IH0sIDUwKTsNCiAgfSwNCg0KICAvLyBlbmFibGVzIGNyb3NzIGJyb3dzZXIgdXNlIG9mIHJlbGF0aXZlIHdpZHRoL2hlaWdodA0KICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWENCiAgLy8gd2l0aCB0aGFua3MgdG8gSXZhbiBIZXJtYW4gZm9yIHRoZSBzdWdnZXN0aW9uDQogIGFkanVzdF9vYmplY3RfZGltZW5zaW9uczogZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHsNCiAgICBmb3IoIHZhciBpID0gMDsgaSA8IHczY19zbGlkeS5vYmplY3RzLmxlbmd0aDsgaSsrICkNCiAgICB7DQogICAgICB2YXIgb2JqID0gdGhpcy5vYmplY3RzW2ldOw0KICAgICAgdmFyIG1pbWVUeXBlID0gb2JqLmdldEF0dHJpYnV0ZSgidHlwZSIpOw0KDQogICAgICBpZiAobWltZVR5cGUgPT0gImltYWdlL3N2Zyt4bWwiIHx8IG1pbWVUeXBlID09ICJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCIpDQogICAgICB7DQogICAgICAgIGlmICggIW9iai5pbml0aWFsV2lkdGggKSANCiAgICAgICAgICBvYmouaW5pdGlhbFdpZHRoID0gb2JqLmdldEF0dHJpYnV0ZSgid2lkdGgiKTsNCg0KICAgICAgICBpZiAoICFvYmouaW5pdGlhbEhlaWdodCApIA0KICAgICAgICAgIG9iai5pbml0aWFsSGVpZ2h0ID0gb2JqLmdldEF0dHJpYnV0ZSgiaGVpZ2h0Iik7DQoNCiAgICAgICAgaWYgKCBvYmouaW5pdGlhbFdpZHRoICYmIG9iai5pbml0aWFsV2lkdGguY2hhckF0KG9iai5pbml0aWFsV2lkdGgubGVuZ3RoLTEpID09ICIlIiApDQogICAgICAgIHsNCiAgICAgICAgICB2YXIgdyA9IHBhcnNlSW50KG9iai5pbml0aWFsV2lkdGguc2xpY2UoMCwgb2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkpOw0KICAgICAgICAgIHZhciBuZXdXID0gd2lkdGggKiAody8xMDAuMCk7DQogICAgICAgICAgb2JqLnNldEF0dHJpYnV0ZSgid2lkdGgiLG5ld1cpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCBvYmouaW5pdGlhbEhlaWdodCAmJg0KICAgICAgICAgICAgIG9iai5pbml0aWFsSGVpZ2h0LmNoYXJBdChvYmouaW5pdGlhbEhlaWdodC5sZW5ndGgtMSkgPT0gIiUiICkNCiAgICAgICAgew0KICAgICAgICAgIHZhciBoID0gcGFyc2VJbnQob2JqLmluaXRpYWxIZWlnaHQuc2xpY2UoMCwgb2JqLmluaXRpYWxIZWlnaHQubGVuZ3RoLTEpKTsNCiAgICAgICAgICB2YXIgbmV3SCA9IGhlaWdodCAqIChoLzEwMC4wKTsNCiAgICAgICAgICBvYmouc2V0QXR0cmlidXRlKCJoZWlnaHQiLCBuZXdIKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCg0KICAvLyBuZWVkZWQgZm9yIE9wZXJhIHRvIGluaGliaXQgZGVmYXVsdCBiZWhhdmlvcg0KICAvLyBzaW5jZSBPcGVyYSBkZWxpdmVycyBrZXlQcmVzcyBldmVuIGlmIGtleURvd24NCiAgLy8gd2FzIGNhbmNlbGxlZA0KICBrZXlfcHJlc3M6IGZ1bmN0aW9uIChldmVudCkgew0KICAgIGlmICghZXZlbnQpDQogICAgICBldmVudCA9IHdpbmRvdy5ldmVudDsNCg0KICAgIGlmICghdzNjX3NsaWR5LmtleV93YW50ZWQpDQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7DQoNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfSwNCg0KICAvLyAgU2VlIGUuZy4gaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9qcy9ldmVudHMva2V5cy5odG1sIGZvciBrZXljb2Rlcw0KICBrZXlfZG93bjogZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgdmFyIGtleSwgdGFyZ2V0LCB0YWc7DQoNCiAgICB3M2Nfc2xpZHkua2V5X3dhbnRlZCA9IHRydWU7DQoNCiAgICBpZiAoIWV2ZW50KQ0KICAgICAgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7DQoNCiAgICAvLyBrbHVkZ2UgYXJvdW5kIE5TL0lFIGRpZmZlcmVuY2VzIA0KICAgIGlmICh3aW5kb3cuZXZlbnQpDQogICAgew0KICAgICAga2V5ID0gd2luZG93LmV2ZW50LmtleUNvZGU7DQogICAgICB0YXJnZXQgPSB3aW5kb3cuZXZlbnQuc3JjRWxlbWVudDsNCiAgICB9DQogICAgZWxzZSBpZiAoZXZlbnQud2hpY2gpDQogICAgew0KICAgICAga2V5ID0gZXZlbnQud2hpY2g7DQogICAgICB0YXJnZXQgPSBldmVudC50YXJnZXQ7DQogICAgfQ0KICAgIGVsc2UNCiAgICAgIHJldHVybiB0cnVlOyAvLyBZaWtlcyEgdW5rbm93biBicm93c2VyDQoNCiAgICAvLyBpZ25vcmUgZXZlbnQgaWYga2V5IHZhbHVlIGlzIHplcm8NCiAgICAvLyBhcyBmb3IgYWx0IG9uIE9wZXJhIGFuZCBLb25xdWVyb3INCiAgICBpZiAoIWtleSkNCiAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgIC8vIGF2b2lkIGludGVyZmVyaW5nIHdpdGgga2V5c3Ryb2tlDQogICAgLy8gYmVoYXZpb3IgZm9yIG5vbi1zbGlkeSBjaHJvbWUgZWxlbWVudHMNCiAgICBpZiAoIXczY19zbGlkeS5zbGlkeV9jaHJvbWUodGFyZ2V0KSAmJg0KICAgICAgICB3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkpDQogICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgIC8vIGNoZWNrIGZvciBjb25jdXJyZW50IGNvbnRyb2wvY29tbWFuZC9hbHQga2V5DQogICAgLy8gYnV0IGFyZSB0aGVzZSBvbmx5IHByZXNlbnQgb24gbW91c2UgZXZlbnRzPw0KDQogICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkpDQogICAgICAgcmV0dXJuIHRydWU7DQoNCiAgICAvLyBkaXNtaXNzIHRhYmxlIG9mIGNvbnRlbnRzIGlmIHZpc2libGUNCiAgICBpZiAodzNjX3NsaWR5LmlzX3Nob3duX3RvYygpICYmIGtleSAhPSA5ICYmIGtleSAhPSAxNiAmJiBrZXkgIT0gMzggJiYga2V5ICE9IDQwKQ0KICAgIHsNCiAgICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKHRydWUpOw0KDQogICAgICBpZiAoa2V5ID09IDI3IHx8IGtleSA9PSA4NCB8fCBrZXkgPT0gNjcpDQogICAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQoNCiAgICBpZiAoa2V5ID09IDM0KSAvLyBQYWdlIERvd24NCiAgICB7DQogICAgICBpZiAodzNjX3NsaWR5LnZpZXdfYWxsKQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUoZmFsc2UpOw0KICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOw0KICAgIH0NCiAgICBlbHNlIGlmIChrZXkgPT0gMzMpIC8vIFBhZ2UgVXANCiAgICB7DQogICAgICBpZiAodzNjX3NsaWR5LnZpZXdfYWxsKQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgICAgdzNjX3NsaWR5LnByZXZpb3VzX3NsaWRlKGZhbHNlKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDMyKSAvLyBzcGFjZSBiYXINCiAgICB7DQogICAgICB3M2Nfc2xpZHkubmV4dF9zbGlkZSh0cnVlKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDM3KSAvLyBMZWZ0IGFycm93DQogICAgew0KICAgICAgdzNjX3NsaWR5LnByZXZpb3VzX3NsaWRlKCFldmVudC5zaGlmdEtleSk7DQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7DQogICAgfQ0KICAgIGVsc2UgaWYgKGtleSA9PSAzNikgLy8gSG9tZQ0KICAgIHsNCiAgICAgIHczY19zbGlkeS5maXJzdF9zbGlkZSgpOw0KICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOw0KICAgIH0NCiAgICBlbHNlIGlmIChrZXkgPT0gMzUpIC8vIEVuZA0KICAgIHsNCiAgICAgIHczY19zbGlkeS5sYXN0X3NsaWRlKCk7DQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7DQogICAgfQ0KICAgIGVsc2UgaWYgKGtleSA9PSAzOSkgLy8gUmlnaHQgYXJyb3cNCiAgICB7DQogICAgICB3M2Nfc2xpZHkubmV4dF9zbGlkZSghZXZlbnQuc2hpZnRLZXkpOw0KICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOw0KICAgIH0NCiAgICBlbHNlIGlmIChrZXkgPT0gMTMpIC8vIEVudGVyDQogICAgew0KICAgICAgaWYgKHczY19zbGlkeS5vdXRsaW5lKQ0KICAgICAgew0KICAgICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUudmlzaWJsZSkNCiAgICAgICAgICB3M2Nfc2xpZHkuZm9sZCh3M2Nfc2xpZHkub3V0bGluZSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsNCiAgICAgICAgICANCiAgICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7DQogICAgICB9DQogICAgfQ0KICAgIGVsc2UgaWYgKGtleSA9PSAxODgpICAvLyA8IGZvciBzbWFsbGVyIGZvbnRzDQogICAgew0KICAgICAgdzNjX3NsaWR5LnNtYWxsZXIoKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDE5MCkgIC8vID4gZm9yIGxhcmdlciBmb250cw0KICAgIHsNCiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDE4OSB8fCBrZXkgPT0gMTA5KSAgLy8gLSBmb3Igc21hbGxlciBmb250cw0KICAgIHsNCiAgICAgIHczY19zbGlkeS5zbWFsbGVyKCk7DQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7DQogICAgfQ0KICAgIGVsc2UgaWYgKGtleSA9PSAxODcgfHwga2V5ID09IDE5MSB8fCBrZXkgPT0gMTA3KSAgLy8gPSArICBmb3IgbGFyZ2VyIGZvbnRzDQogICAgew0KICAgICAgdzNjX3NsaWR5LmJpZ2dlcigpOw0KICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOw0KICAgIH0NCiAgICBlbHNlIGlmIChrZXkgPT0gODMpICAvLyBTIGZvciBzbWFsbGVyIGZvbnRzDQogICAgew0KICAgICAgdzNjX3NsaWR5LnNtYWxsZXIoKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDY2KSAgLy8gQiBmb3IgbGFyZ2VyIGZvbnRzDQogICAgew0KICAgICAgdzNjX3NsaWR5LmJpZ2dlcigpOw0KICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOw0KICAgIH0NCiAgICBlbHNlIGlmIChrZXkgPT0gOTApICAvLyBaIGZvciBsYXN0IHNsaWRlDQogICAgew0KICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2xpZGUoKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDcwKSAgLy8gRiBmb3IgdG9nZ2xlIHRvb2xiYXINCiAgICB7DQogICAgICB3M2Nfc2xpZHkudG9nZ2xlX3Rvb2xiYXIoKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDY1KSAgLy8gQSBmb3IgdG9nZ2xlIHZpZXcgc2luZ2xlL2FsbCBzbGlkZXMNCiAgICB7DQogICAgICB3M2Nfc2xpZHkudG9nZ2xlX3ZpZXcoKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDc1KSAgLy8gdG9nZ2xlIGFjdGlvbiBvZiBsZWZ0IGNsaWNrIGZvciBuZXh0IHBhZ2UNCiAgICB7DQogICAgICB3M2Nfc2xpZHkubW91c2VfY2xpY2tfZW5hYmxlZCA9ICF3M2Nfc2xpZHkubW91c2VfY2xpY2tfZW5hYmxlZDsNCiAgICAgIHZhciBhbGVydF9tc2cgPSAodzNjX3NsaWR5Lm1vdXNlX2NsaWNrX2VuYWJsZWQgPw0KICAgICAgICAgICAgICAgICJlbmFibGVkIiA6ICJkaXNhYmxlZCIpICsgICIgbW91c2UgY2xpY2sgYWR2YW5jZSI7DQoNCiAgICAgIGFsZXJ0KHczY19zbGlkeS5sb2NhbGl6ZShhbGVydF9tc2cpKTsNCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsNCiAgICB9DQogICAgZWxzZSBpZiAoa2V5ID09IDg0IHx8IGtleSA9PSA2NykgIC8vIFQgb3IgQyBmb3IgdGFibGUgb2YgY29udGVudHMNCiAgICB7DQogICAgICBpZiAodzNjX3NsaWR5LnRvYykNCiAgICAgICAgdzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpOw0KDQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7DQogICAgfQ0KICAgIGVsc2UgaWYgKGtleSA9PSA3MikgLy8gSCBmb3IgaGVscA0KICAgIHsNCiAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHczY19zbGlkeS5oZWxwX3BhZ2U7DQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7DQogICAgfQ0KICAgIC8vZWxzZSBhbGVydCgia2V5IGNvZGUgaXMgIisga2V5KTsNCg0KICAgIHJldHVybiB0cnVlOw0KICB9LA0KDQogIC8vIHNhZmUgZm9yIGJvdGggdGV4dC9odG1sIGFuZCBhcHBsaWNhdGlvbi94aHRtbCt4bWwNCiAgY3JlYXRlX2VsZW1lbnQ6IGZ1bmN0aW9uIChuYW1lKSB7DQogICAgaWYgKHRoaXMueGh0bWwgJiYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgIT0gJ3VuZGVmaW5lZCcpKQ0KICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsIG5hbWUpDQoNCiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTsNCiAgfSwNCg0KICBnZXRfZWxlbWVudF9zdHlsZTogZnVuY3Rpb24gKGVsZW0sIElFU3R5bGVQcm9wLCBDU1NTdHlsZVByb3ApIHsNCiAgICBpZiAoZWxlbS5jdXJyZW50U3R5bGUpDQogICAgew0KICAgICAgcmV0dXJuIGVsZW0uY3VycmVudFN0eWxlW0lFU3R5bGVQcm9wXTsNCiAgICB9DQogICAgZWxzZSBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUpDQogICAgew0KICAgICAgdmFyIGNvbXBTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0sICIiKTsNCiAgICAgIHJldHVybiBjb21wU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShDU1NTdHlsZVByb3ApOw0KICAgIH0NCiAgICByZXR1cm4gIiI7DQogIH0sDQoNCiAgLy8gdGhlIHN0cmluZyBzdHIgaXMgYSB3aGl0ZXNwYWNlIHNlcGFyYXRlZCBsaXN0IG9mIHRva2Vucw0KICAvLyB0ZXN0IGlmIHN0ciBjb250YWlucyBhIHBhcnRpY3VsYXIgdG9rZW4sIGUuZy4gInNsaWRlIg0KICBoYXNfdG9rZW46IGZ1bmN0aW9uIChzdHIsIHRva2VuKSB7DQogICAgaWYgKHN0cikNCiAgICB7DQogICAgICAvLyBkZWZpbmUgcGF0dGVybiBhcyByZWd1bGFyIGV4cHJlc3Npb24NCiAgICAgIHZhciBwYXR0ZXJuID0gL1x3Ky9nOw0KDQogICAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcw0KICAgICAgLy8gcGxhY2UgcmVzdWx0IGluIGFycmF5DQogICAgICB2YXIgcmVzdWx0ID0gc3RyLm1hdGNoKHBhdHRlcm4pOw0KDQogICAgICAvLyBub3cgY2hlY2sgaWYgZGVzaXJlZCB0b2tlbiBpcyBwcmVzZW50DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykNCiAgICAgIHsNCiAgICAgICAgaWYgKHJlc3VsdFtpXSA9PSB0b2tlbikNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gZmFsc2U7DQogIH0sDQoNCiAgZ2V0X2NsYXNzX2xpc3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7DQogICAgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSAhPSAndW5kZWZpbmVkJykNCiAgICAgIHJldHVybiBlbGVtZW50LmNsYXNzTmFtZTsNCg0KICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZSgiY2xhc3MiKTsNCiAgfSwNCg0KICBoYXNfY2xhc3M6IGZ1bmN0aW9uIChlbGVtZW50LCBuYW1lKSB7DQogICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT0gMSkNCiAgICAgIHJldHVybiBmYWxzZTsNCg0KICAgIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKCIoXnwgKSIgKyBuYW1lICsgIlxXKiIpOw0KDQogICAgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSAhPSAndW5kZWZpbmVkJykNCiAgICAgIHJldHVybiByZWdleHAudGVzdChlbGVtZW50LmNsYXNzTmFtZSk7DQoNCiAgICByZXR1cm4gcmVnZXhwLnRlc3QoZWxlbWVudC5nZXRBdHRyaWJ1dGUoImNsYXNzIikpOw0KICB9LA0KDQogIHJlbW92ZV9jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsNCiAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZSArICJcVyoiKTsNCiAgICB2YXIgY2xzdmFsID0gIiI7DQoNCiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQ0KICAgIHsNCiAgICAgIGNsc3ZhbCA9IGVsZW1lbnQuY2xhc3NOYW1lOw0KDQogICAgICBpZiAoY2xzdmFsKQ0KICAgICAgew0KICAgICAgICBjbHN2YWwgPSBjbHN2YWwucmVwbGFjZShyZWdleHAsICIiKTsNCiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbHN2YWw7DQogICAgICB9DQogICAgfQ0KICAgIGVsc2UNCiAgICB7DQogICAgICBjbHN2YWwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgiY2xhc3MiKTsNCg0KICAgICAgaWYgKGNsc3ZhbCkNCiAgICAgIHsNCiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7DQogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNsc3ZhbCk7DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIGFkZF9jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsNCiAgICBpZiAoIXRoaXMuaGFzX2NsYXNzKGVsZW1lbnQsIG5hbWUpKQ0KICAgIHsNCiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5jbGFzc05hbWUgIT0gJ3VuZGVmaW5lZCcpDQogICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9ICIgIiArIG5hbWU7DQogICAgICBlbHNlDQogICAgICB7DQogICAgICAgIHZhciBjbHN2YWwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgiY2xhc3MiKTsNCiAgICAgICAgY2xzdmFsID0gY2xzdmFsID8gY2xzdmFsICsgIiAiICsgbmFtZSA6IG5hbWU7DQogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNsc3ZhbCk7DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIC8vIEhUTUwgZWxlbWVudHMgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGNsYXNzPSJpbmNyZW1lbnRhbCINCiAgLy8gbm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBwdXQgdGhlIGNsYXNzIG9uIGNvbnRhaW5lcnMgbGlrZQ0KICAvLyB1cCwgb2wsIGRsLCBhbmQgZGl2IHRvIG1ha2UgdGhlaXIgY29udGVudHMgYXBwZWFyDQogIC8vIGluY3JlbWVudGFsbHkuIFVwcGVyIGNhc2UgaXMgdXNlZCBzaW5jZSB0aGlzIGlzIHdoYXQNCiAgLy8gYnJvd3NlcnMgcmVwb3J0IGZvciBIVE1MIG5vZGUgbmFtZXMgKHRleHQvaHRtbCkuDQogIGluY3JlbWVudGFsX2VsZW1lbnRzOiBudWxsLA0KICBva2F5X2Zvcl9pbmNyZW1lbnRhbDogZnVuY3Rpb24gKG5hbWUpIHsNCiAgICBpZiAoIXRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMpDQogICAgew0KICAgICAgdmFyIGluY2xpc3QgPSBuZXcgQXJyYXkoKTsNCiAgICAgIGluY2xpc3RbInAiXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJwcmUiXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJsaSJdID0gdHJ1ZTsNCiAgICAgIGluY2xpc3RbImJsb2NrcXVvdGUiXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJkdCJdID0gdHJ1ZTsNCiAgICAgIGluY2xpc3RbImRkIl0gPSB0cnVlOw0KICAgICAgaW5jbGlzdFsiaDIiXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJoMyJdID0gdHJ1ZTsNCiAgICAgIGluY2xpc3RbImg0Il0gPSB0cnVlOw0KICAgICAgaW5jbGlzdFsiaDUiXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJoNiJdID0gdHJ1ZTsNCiAgICAgIGluY2xpc3RbInNwYW4iXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJhZGRyZXNzIl0gPSB0cnVlOw0KICAgICAgaW5jbGlzdFsidGFibGUiXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJ0ciJdID0gdHJ1ZTsNCiAgICAgIGluY2xpc3RbInRoIl0gPSB0cnVlOw0KICAgICAgaW5jbGlzdFsidGQiXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJpbWciXSA9IHRydWU7DQogICAgICBpbmNsaXN0WyJvYmplY3QiXSA9IHRydWU7DQogICAgICB0aGlzLmluY3JlbWVudGFsX2VsZW1lbnRzID0gaW5jbGlzdDsNCiAgICB9DQogICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHNbbmFtZS50b0xvd2VyQ2FzZSgpXTsNCiAgfSwNCg0KICBuZXh0X2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7DQogICAgdmFyIGJyID0gdGhpcy5pc194aHRtbCA/ICJiciIgOiAiQlIiOw0KICAgIHZhciBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07DQoNCiAgICBmb3IgKDs7KQ0KICAgIHsNCiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkubmV4dF9ub2RlKHNsaWRlLCBub2RlKTsNCg0KICAgICAgaWYgKG5vZGUgPT0gbnVsbCB8fCBub2RlLnBhcmVudE5vZGUgPT0gbnVsbCkNCiAgICAgICAgYnJlYWs7DQoNCiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpICAvLyBFTEVNRU5UDQogICAgICB7DQogICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IGJyKQ0KICAgICAgICAgIGNvbnRpbnVlOw0KDQogICAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKG5vZGUsICJpbmNyZW1lbnRhbCIpDQogICAgICAgICAgICAgJiYgdzNjX3NsaWR5Lm9rYXlfZm9yX2luY3JlbWVudGFsKG5vZGUubm9kZU5hbWUpKQ0KICAgICAgICAgIHJldHVybiBub2RlOw0KDQogICAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKG5vZGUucGFyZW50Tm9kZSwgImluY3JlbWVudGFsIikNCiAgICAgICAgICAgICAmJiAhdzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLCAibm9uLWluY3JlbWVudGFsIikpDQogICAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIG5vZGU7DQogIH0sDQoNCiAgcHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbTogZnVuY3Rpb24gKG5vZGUpIHsNCiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7DQogICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsNCg0KICAgIGZvciAoOzspDQogICAgew0KICAgICAgbm9kZSA9IHczY19zbGlkeS5wcmV2aW91c19ub2RlKHNsaWRlLCBub2RlKTsNCg0KICAgICAgaWYgKG5vZGUgPT0gbnVsbCB8fCBub2RlLnBhcmVudE5vZGUgPT0gbnVsbCkNCiAgICAgICAgYnJlYWs7DQoNCiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpDQogICAgICB7DQogICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IGJyKQ0KICAgICAgICAgIGNvbnRpbnVlOw0KDQogICAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKG5vZGUsICJpbmNyZW1lbnRhbCIpDQogICAgICAgICAgICAgJiYgdzNjX3NsaWR5Lm9rYXlfZm9yX2luY3JlbWVudGFsKG5vZGUubm9kZU5hbWUpKQ0KICAgICAgICAgIHJldHVybiBub2RlOw0KDQogICAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKG5vZGUucGFyZW50Tm9kZSwgImluY3JlbWVudGFsIikNCiAgICAgICAgICAgICAmJiAhdzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLCAibm9uLWluY3JlbWVudGFsIikpDQogICAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIG5vZGU7DQogIH0sDQoNCiAgLy8gc2V0IHZpc2liaWxpdHkgZm9yIGFsbCBlbGVtZW50cyBvbiBjdXJyZW50IHNsaWRlIHdpdGgNCiAgLy8gYSBwYXJlbnQgZWxlbWVudCB3aXRoIGF0dHJpYnV0ZSBjbGFzcz0iaW5jcmVtZW50YWwiDQogIHNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbDogZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgdmFyIG5vZGUgPSB0aGlzLm5leHRfaW5jcmVtZW50YWxfaXRlbShudWxsKTsNCg0KICAgIGlmICh2YWx1ZSA9PSAiaGlkZGVuIikNCiAgICB7DQogICAgICB3aGlsZSAobm9kZSkNCiAgICAgIHsNCiAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyhub2RlLCAiaW52aXNpYmxlIik7DQogICAgICAgIG5vZGUgPSB3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKG5vZGUpOw0KICAgICAgfQ0KICAgIH0NCiAgICBlbHNlIC8vIHZhbHVlID09ICJ2aXNpYmxlIg0KICAgIHsNCiAgICAgIHdoaWxlIChub2RlKQ0KICAgICAgew0KICAgICAgICB3M2Nfc2xpZHkucmVtb3ZlX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsNCiAgICAgICAgbm9kZSA9IHczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0obm9kZSk7DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIC8vIHJldmVhbCB0aGUgbmV4dCBoaWRkZW4gaXRlbSBvbiB0aGUgc2xpZGUNCiAgLy8gbm9kZSBpcyBudWxsIG9yIHRoZSBub2RlIHRoYXQgd2FzIGxhc3QgcmV2ZWFsZWQNCiAgcmV2ZWFsX25leHRfaXRlbTogZnVuY3Rpb24gKG5vZGUpIHsNCiAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsNCg0KICAgIGlmIChub2RlICYmIG5vZGUubm9kZVR5cGUgPT0gMSkgIC8vIGFuIGVsZW1lbnQNCiAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOw0KDQogICAgcmV0dXJuIG5vZGU7DQogIH0sDQoNCiAgLy8gZXhhY3QgaW52ZXJzZSBvZiByZXZlYWxOZXh0SXRlbShub2RlKQ0KICBoaWRlX3ByZXZpb3VzX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7DQogICAgaWYgKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PSAxKSAgLy8gYW4gZWxlbWVudA0KICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyhub2RlLCAiaW52aXNpYmxlIik7DQoNCiAgICByZXR1cm4gdGhpcy5wcmV2aW91c19pbmNyZW1lbnRhbF9pdGVtKG5vZGUpOw0KICB9LA0KDQogIC8vIGxlZnQgdG8gcmlnaHQgdHJhdmVyc2FsIG9mIHJvb3QncyBjb250ZW50DQogIG5leHRfbm9kZTogZnVuY3Rpb24gKHJvb3QsIG5vZGUpIHsNCiAgICBpZiAobm9kZSA9PSBudWxsKQ0KICAgICAgcmV0dXJuIHJvb3QuZmlyc3RDaGlsZDsNCg0KICAgIGlmIChub2RlLmZpcnN0Q2hpbGQpDQogICAgICByZXR1cm4gbm9kZS5maXJzdENoaWxkOw0KDQogICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpDQogICAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZzsNCg0KICAgIGZvciAoOzspDQogICAgew0KICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTsNCg0KICAgICAgaWYgKCFub2RlIHx8IG5vZGUgPT0gcm9vdCkNCiAgICAgICAgYnJlYWs7DQoNCiAgICAgIGlmIChub2RlICYmIG5vZGUubmV4dFNpYmxpbmcpDQogICAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nOw0KICAgIH0NCg0KICAgIHJldHVybiBudWxsOw0KICB9LA0KDQogIC8vIHJpZ2h0IHRvIGxlZnQgdHJhdmVyc2FsIG9mIHJvb3QncyBjb250ZW50DQogIHByZXZpb3VzX25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7DQogICAgaWYgKG5vZGUgPT0gbnVsbCkNCiAgICB7DQogICAgICBub2RlID0gcm9vdC5sYXN0Q2hpbGQ7DQoNCiAgICAgIGlmIChub2RlKQ0KICAgICAgew0KICAgICAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpDQogICAgICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gbm9kZTsNCiAgICB9DQoNCiAgICBpZiAobm9kZS5wcmV2aW91c1NpYmxpbmcpDQogICAgew0KICAgICAgbm9kZSA9IG5vZGUucHJldmlvdXNTaWJsaW5nOw0KDQogICAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpDQogICAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDsNCg0KICAgICAgcmV0dXJuIG5vZGU7DQogICAgfQ0KDQogICAgaWYgKG5vZGUucGFyZW50Tm9kZSAhPSByb290KQ0KICAgICAgcmV0dXJuIG5vZGUucGFyZW50Tm9kZTsNCg0KICAgIHJldHVybiBudWxsOw0KICB9LA0KDQogIHByZXZpb3VzX3NpYmxpbmdfZWxlbWVudDogZnVuY3Rpb24gKGVsKSB7DQogICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7DQoNCiAgICB3aGlsZSAoZWwgJiYgZWwubm9kZVR5cGUgIT0gMSkNCiAgICAgIGVsID0gZWwucHJldmlvdXNTaWJsaW5nOw0KDQogICAgcmV0dXJuIGVsOw0KICB9LA0KDQogIG5leHRfc2libGluZ19lbGVtZW50OiBmdW5jdGlvbiAoZWwpIHsNCiAgICBlbCA9IGVsLm5leHRTaWJsaW5nOw0KDQogICAgd2hpbGUgKGVsICYmIGVsLm5vZGVUeXBlICE9IDEpDQogICAgICBlbCA9IGVsLm5leHRTaWJsaW5nOw0KDQogICAgcmV0dXJuIGVsOw0KICB9LA0KDQogIGZpcnN0X2NoaWxkX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbCkgew0KICAgIHZhciBub2RlOw0KDQogICAgZm9yIChub2RlID0gZWwuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpDQogICAgew0KICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkNCiAgICAgICAgYnJlYWs7DQogICAgfQ0KDQogICAgcmV0dXJuIG5vZGU7DQogIH0sDQoNCiAgZmlyc3RfdGFnOiBmdW5jdGlvbiAoZWxlbWVudCwgdGFnKSB7DQogICAgdmFyIG5vZGU7DQoNCiAgICBpZiAoIXRoaXMuaXNfeGh0bWwpDQogICAgICB0YWcgPSB0YWcudG9VcHBlckNhc2UoKTsNCg0KICAgIGZvciAobm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpDQogICAgew0KICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiBub2RlLm5vZGVOYW1lID09IHRhZykNCiAgICAgICAgYnJlYWs7DQogICAgfQ0KDQogICAgcmV0dXJuIG5vZGU7DQogIH0sDQoNCiAgaGlkZV9zZWxlY3Rpb246IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikgLy8gRmlyZWZveCwgQ2hyb21pdW0sIFNhZmFyaSwgT3BlcmENCiAgICB7DQogICAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOw0KDQogICAgICBpZiAoc2VsZWN0aW9uLnJhbmdlQ291bnQgPiAwKQ0KICAgICAgew0KICAgICAgICB2YXIgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTsNCiAgICAgICAgcmFuZ2UuY29sbGFwc2UgKGZhbHNlKTsNCiAgICAgIH0NCiAgICB9DQogICAgZWxzZSAvLyBJbnRlcm5ldCBFeHBsb3Jlcg0KICAgIHsNCiAgICAgIHZhciB0ZXh0UmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UgKCk7DQogICAgICB0ZXh0UmFuZ2UuY29sbGFwc2UgKGZhbHNlKTsNCiAgICB9DQogIH0sDQoNCiAgZ2V0X3NlbGVjdGVkX3RleHQ6IGZ1bmN0aW9uICgpIHsNCiAgICB0cnkNCiAgICB7DQogICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikNCiAgICAgICAgcmV0dXJuIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpOw0KDQogICAgICBpZiAoZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKQ0KICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKTsNCg0KICAgICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikNCiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLnRleHQ7DQogICAgfQ0KICAgIGNhdGNoIChlKQ0KICAgIHsNCiAgICB9DQoNCiAgICByZXR1cm4gIiI7DQogIH0sDQoNCiAgLy8gbWFrZSBub3RlIG9mIGxlbmd0aCBvZiBzZWxlY3RlZCB0ZXh0DQogIC8vIGFzIHRoaXMgZXZhbHVhdGVzIHRvIHplcm8gaW4gY2xpY2sgZXZlbnQNCiAgbW91c2VfYnV0dG9uX3VwOiBmdW5jdGlvbiAoZSkgew0KICAgIHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA9IHczY19zbGlkeS5nZXRfc2VsZWN0ZWRfdGV4dCgpLmxlbmd0aDsNCiAgfSwNCg0KICBtb3VzZV9idXR0b25fZG93bjogZnVuY3Rpb24gKGUpIHsNCiAgICB3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPSB3M2Nfc2xpZHkuZ2V0X3NlbGVjdGVkX3RleHQoKS5sZW5ndGg7DQogICAgdzNjX3NsaWR5Lm1vdXNlX3ggPSBlLmNsaWVudFg7DQogICAgdzNjX3NsaWR5Lm1vdXNlX3kgPSBlLmNsaWVudFk7DQogIH0sDQoNCiAgLy8gcmlnaHQgbW91c2UgYnV0dG9uIGNsaWNrIGlzIHJlc2VydmVkIGZvciBjb250ZXh0IG1lbnVzDQogIC8vIGl0IGlzIG1vcmUgcmVsaWFibGUgdG8gZGV0ZWN0IHJpZ2h0Y2xpY2sgdGhhbiBsZWZ0Y2xpY2sNCiAgbW91c2VfYnV0dG9uX2NsaWNrOiBmdW5jdGlvbiAoZSkgew0KICAgIGlmICghZSkNCiAgICAgIHZhciBlID0gd2luZG93LmV2ZW50Ow0KDQogICAgaWYgKE1hdGguYWJzKGUuY2xpZW50WCAtdzNjX3NsaWR5Lm1vdXNlX3gpICsNCiAgICAgICAgTWF0aC5hYnMoZS5jbGllbnRZIC13M2Nfc2xpZHkubW91c2VfeSkgPiAxMCkNCiAgICAgIHJldHVybiB0cnVlOw0KDQogICAgaWYgKHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA+IDApDQogICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgIHZhciByaWdodGNsaWNrID0gZmFsc2U7DQogICAgdmFyIGxlZnRjbGljayA9IGZhbHNlOw0KICAgIHZhciBtaWRkbGVjbGljayA9IGZhbHNlOw0KICAgIHZhciB0YXJnZXQ7DQoNCiAgICBpZiAoIWUpDQogICAgICB2YXIgZSA9IHdpbmRvdy5ldmVudDsNCg0KICAgIGlmIChlLnRhcmdldCkNCiAgICAgIHRhcmdldCA9IGUudGFyZ2V0Ow0KICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkNCiAgICAgIHRhcmdldCA9IGUuc3JjRWxlbWVudDsNCg0KICAgIC8vIHdvcmsgYXJvdW5kIFNhZmFyaSBidWcNCiAgICBpZiAodGFyZ2V0Lm5vZGVUeXBlID09IDMpDQogICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTsNCg0KICAgIGlmIChlLndoaWNoKSAvLyBhbGwgYnJvd3NlcnMgZXhjZXB0IElFDQogICAgew0KICAgICAgbGVmdGNsaWNrID0gKGUud2hpY2ggPT0gMSk7DQogICAgICBtaWRkbGVjbGljayA9IChlLndoaWNoID09IDIpOw0KICAgICAgcmlnaHRjbGljayA9IChlLndoaWNoID09IDMpOw0KICAgIH0NCiAgICBlbHNlIGlmIChlLmJ1dHRvbikNCiAgICB7DQogICAgICAvLyBLb25xdWVyb3IgZ2l2ZXMgMSBmb3IgbGVmdCwgNCBmb3IgbWlkZGxlDQogICAgICAvLyBJRTYgZ2l2ZXMgMCBmb3IgbGVmdCBhbmQgbm90IDEgYXMgSSBleHBlY3RlZA0KDQogICAgICBpZiAoZS5idXR0b24gPT0gNCkNCiAgICAgICAgbWlkZGxlY2xpY2sgPSB0cnVlOw0KDQogICAgICAvLyBhbGwgYnJvd3NlcnMgYWdyZWUgb24gMiBmb3IgcmlnaHQgYnV0dG9uDQogICAgICByaWdodGNsaWNrID0gKGUuYnV0dG9uID09IDIpOw0KICAgIH0NCiAgICBlbHNlDQogICAgICBsZWZ0Y2xpY2sgPSB0cnVlOw0KDQogICAgaWYgKHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA+IDApDQogICAgew0KICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7DQogICAgICBlLmNhbmNlbCA9IHRydWU7DQogICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLy8gZGlzbWlzcyB0YWJsZSBvZiBjb250ZW50cw0KICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKGZhbHNlKTsNCg0KICAgIC8vIGNoZWNrIGlmIHRhcmdldCBpcyBzb21ldGhpbmcgdGhhdCBwcm9iYWJseSB3YW50J3MgY2xpY2tzDQogICAgLy8gZS5nLiBhLCBlbWJlZCwgb2JqZWN0LCBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgb3B0aW9uDQogICAgdmFyIHRhZyA9IHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOw0KDQogICAgaWYgKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkICYmIGxlZnRjbGljayAmJg0KICAgICAgICAhdzNjX3NsaWR5LnNwZWNpYWxfZWxlbWVudCh0YXJnZXQpICYmDQogICAgICAgICF0YXJnZXQub25jbGljaykNCiAgICB7DQogICAgICB3M2Nfc2xpZHkubmV4dF9zbGlkZSh0cnVlKTsNCiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOw0KICAgICAgZS5jYW5jZWwgPSB0cnVlOw0KICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOw0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KICB9LA0KDQogIHNwZWNpYWxfZWxlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQpIHsNCiAgICBpZiAodGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgIm5vbi1pbnRlcmFjdGl2ZSIpKQ0KICAgICAgcmV0dXJuIGZhbHNlOw0KDQogICAgdmFyIHRhZyA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCg0KICAgIHJldHVybiBlbGVtZW50Lm9ua2V5ZG93biB8fA0KICAgICAgZWxlbWVudC5vbmNsaWNrIHx8DQogICAgICB0YWcgPT0gImEiIHx8DQogICAgICB0YWcgPT0gImVtYmVkIiB8fA0KICAgICAgdGFnID09ICJvYmplY3QiIHx8DQogICAgICB0YWcgPT0gInZpZGVvIiB8fA0KICAgICAgdGFnID09ICJhdWRpbyIgfHwNCiAgICAgIHRhZyA9PSAic3ZnIiB8fA0KICAgICAgdGFnID09ICJjYW52YXMiIHx8DQogICAgICB0YWcgPT0gImlucHV0IiB8fA0KICAgICAgdGFnID09ICJ0ZXh0YXJlYSIgfHwNCiAgICAgIHRhZyA9PSAic2VsZWN0IiB8fA0KICAgICAgdGFnID09ICJvcHRpb24iOw0KICB9LA0KDQogIHNsaWR5X2Nocm9tZTogZnVuY3Rpb24gKGVsKSB7DQogICAgd2hpbGUgKGVsKQ0KICAgIHsNCiAgICAgIGlmIChlbCA9PSB3M2Nfc2xpZHkudG9jIHx8DQogICAgICAgICAgZWwgPT0gdzNjX3NsaWR5LnRvb2xiYXIgfHwNCiAgICAgICAgICB3M2Nfc2xpZHkuaGFzX2NsYXNzKGVsLCAib3V0bGluZSIpKQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgICAgZWwgPSBlbC5wYXJlbnROb2RlOw0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCiAgfSwNCg0KICBnZXRfa2V5OiBmdW5jdGlvbiAoZSkNCiAgew0KICAgIHZhciBrZXk7DQoNCiAgICAvLyBrbHVkZ2UgYXJvdW5kIE5TL0lFIGRpZmZlcmVuY2VzIA0KICAgIGlmICh0eXBlb2Ygd2luZG93LmV2ZW50ICE9ICJ1bmRlZmluZWQiKQ0KICAgICAga2V5ID0gd2luZG93LmV2ZW50LmtleUNvZGU7DQogICAgZWxzZSBpZiAoZS53aGljaCkNCiAgICAgIGtleSA9IGUud2hpY2g7DQoNCiAgICByZXR1cm4ga2V5Ow0KICB9LA0KDQogIGdldF90YXJnZXQ6IGZ1bmN0aW9uIChlKSB7DQogICAgdmFyIHRhcmdldDsNCg0KICAgIGlmICghZSkNCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7DQoNCiAgICBpZiAoZS50YXJnZXQpDQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsNCiAgICBlbHNlIGlmIChlLnNyY0VsZW1lbnQpDQogICAgICB0YXJnZXQgPSBlLnNyY0VsZW1lbnQ7DQoNCiAgICBpZiAodGFyZ2V0Lm5vZGVUeXBlICE9IDEpDQogICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTsNCg0KICAgIHJldHVybiB0YXJnZXQ7DQogIH0sDQoNCiAgLy8gZG9lcyBkaXNwbGF5IHByb3BlcnR5IHByb3ZpZGUgY29ycmVjdCBkZWZhdWx0cz8NCiAgaXNfYmxvY2s6IGZ1bmN0aW9uIChlbGVtKSB7DQogICAgdmFyIHRhZyA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCg0KICAgIHJldHVybiB0YWcgPT0gIm9sIiB8fCB0YWcgPT0gInVsIiB8fCB0YWcgPT0gInAiIHx8IHRhZyA9PSAiZGwiIHx8DQogICAgICAgICAgIHRhZyA9PSAibGkiIHx8IHRhZyA9PSAidGFibGUiIHx8IHRhZyA9PSAicHJlIiB8fA0KICAgICAgICAgICB0YWcgPT0gImgxIiB8fCB0YWcgPT0gImgyIiB8fCB0YWcgPT0gImgzIiB8fA0KICAgICAgICAgICB0YWcgPT0gImg0IiB8fCB0YWcgPT0gImg1IiB8fCB0YWcgPT0gImg2IiB8fA0KICAgICAgICAgICB0YWcgPT0gImJsb2NrcXVvdGUiIHx8IHRhZyA9PSAiYWRkcmVzcyI7IA0KICB9LA0KDQogIGFkZF9saXN0ZW5lcjogZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7DQogICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKQ0KICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBmYWxzZSk7DQogICAgZWxzZQ0KICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgib24iK2V2ZW50LCBoYW5kbGVyKTsNCiAgfSwNCg0KICAvLyB1c2VkIHRvIHByZXZlbnQgZXZlbnQgcHJvcGFnYXRpb24gZnJvbSBmaWVsZCBjb250cm9scw0KICBzdG9wX3Byb3BhZ2F0aW9uOiBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICBldmVudCA9IGV2ZW50ID8gZXZlbnQgOiB3aW5kb3cuZXZlbnQ7DQogICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTsgIC8vIGZvciBJRQ0KDQogICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikNCiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KDQogICAgcmV0dXJuIHRydWU7DQogIH0sDQoNCiAgY2FuY2VsOiBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICBpZiAoZXZlbnQpDQogICAgew0KICAgICAgIGV2ZW50LmNhbmNlbCA9IHRydWU7DQogICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTsNCg0KICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KQ0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgIH0NCg0KICAgIHczY19zbGlkeS5rZXlfd2FudGVkID0gZmFsc2U7DQogICAgcmV0dXJuIGZhbHNlOw0KICB9LA0KDQovLyBmb3IgZWFjaCBsYW5ndWFnZSBkZWZpbmUgYW4gYXNzb2NpYXRpdmUgYXJyYXkNCi8vIGFuZCBhbHNvIHRoZSBoZWxwIHRleHQgd2hpY2ggaXMgbG9uZ2VyDQoNCiAgc3RyaW5nc19lczogew0KICAgICJzbGlkZSI6InDDoWcuIiwNCiAgICAiaGVscD8iOiJBeXVkYSIsDQogICAgImNvbnRlbnRzPyI6IsONbmRpY2UiLA0KICAgICJ0YWJsZSBvZiBjb250ZW50cyI6InRhYmxhIGRlIGNvbnRlbmlkb3MiLA0KICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhYmxhIGRlIENvbnRlbmlkb3MiLA0KICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IlJlaW5pY2lhciBwcmVzZW50YWNpw7NuIiwNCiAgICAicmVzdGFydD8iOiJJbmljaW8iDQogIH0sDQogIGhlbHBfZXM6DQogICAgIlV0aWxpY2UgZWwgcmF0w7NuLCBiYXJyYSBlc3BhY2lhZG9yYSwgdGVjbGFzIEl6ZGEvRGNoYSwgIiArDQogICAgIm8gUmUgcMOhZyB5IEF2IHDDoWcuIFVzZSBTIHkgQiBwYXJhIGNhbWJpYXIgZWwgdGFtYcOxbyBkZSBmdWVudGUuIiwNCg0KICBzdHJpbmdzX2NhOiB7DQogICAgInNsaWRlIjoicMOgZy4uIiwNCiAgICAiaGVscD8iOiJBanVkYSIsDQogICAgImNvbnRlbnRzPyI6IsONbmRleCIsDQogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoidGF1bGEgZGUgY29udGluZ3V0cyIsDQogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiVGF1bGEgZGUgQ29udGluZ3V0cyIsDQogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVpbmljaWFyIHByZXNlbnRhY2nDsyIsDQogICAgInJlc3RhcnQ/IjoiSW5pY2kiDQogIH0sDQogIGhlbHBfY2E6DQogICAgIlV0aWxpdHppIGVsIHJhdG9sw60sIGJhcnJhIGVzcGFpYWRvcmEsIHRlY2xlcyBFc3EuL0R0YS4gIiArDQogICAgIm8gUmUgcMOgZyB5IEF2IHDDoGcuIFVzaSBTIGkgQiBwZXIgY2FudmlhciBncmFuZMOgcmlhIGRlIGZvbnQuIiwNCg0KICBzdHJpbmdzX2NzOiB7DQogICAgInNsaWRlIjoic27DrW1layIsDQogICAgImhlbHA/IjoibsOhcG92xJtkYSIsDQogICAgImNvbnRlbnRzPyI6Im9ic2FoIiwNCiAgICAidGFibGUgb2YgY29udGVudHMiOiJvYnNhaCBwcmV6ZW50YWNlIiwNCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJPYnNhaCBwcmV6ZW50YWNlIiwNCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJ6bm92dSBzcHVzdGl0IHByZXplbnRhY2kiLA0KICAgICJyZXN0YXJ0PyI6InJlc3RhcnQiDQogIH0sDQogIGhlbHBfY3M6DQogICAgIlByZXplbnRhY2kgbcWvxb5ldGUgcHJvY2jDoXpldCBwb21vY8OtIGtsaWtudXTDrSBtecWhaSwgbWV6ZXJuw61rdSwgIiArDQogICAgIsWhaXBlayB2bGV2byBhIHZwcmF2byBuZWJvIGtsw6F2ZXMgUGFnZVVwIGEgUGFnZURvd24uIFDDrXNtbyBzZSAiICsNCiAgICAiZMOhIHp2xJt0xaFpdCBhIHptZW7FoWl0IHBvbW9jw60ga2zDoXZlcyBCIGEgUy4iLA0KDQogIHN0cmluZ3Nfbmw6IHsNCiAgICAic2xpZGUiOiJwYWdpbmEiLA0KICAgICJoZWxwPyI6IkhlbHA/IiwNCiAgICAiY29udGVudHM/IjoiSW5ob3VkPyIsDQogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoiaW5ob3Vkc29wZ2F2ZSIsDQogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiSW5ob3Vkc29wZ2F2ZSIsDQogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiaGVyc3RhcnQgcHJlc2VudGF0aWUiLA0KICAgICJyZXN0YXJ0PyI6IkhlcnN0YXJ0PyINCiAgfSwNCiAgaGVscF9ubDoNCiAgICAgIk5hdmlnZWVyIGQubS52LiBoZXQgbXVpcywgc3BhdGllYmFyLCBMaW5rcy9SZWNodHMgdG9ldHNlbiwgIiArDQogICAgICJvZiBQZ1VwIGVuIFBnRG4uIEdlYnJ1aWsgUyBlbiBCIG9tIGRlIGthcmFrdGVyZ3Jvb3R0ZSB0ZSB2ZXJhbmRlcmVuLiIsDQoNCiAgc3RyaW5nc19kZTogew0KICAgICJzbGlkZSI6IlNlaXRlIiwNCiAgICAiaGVscD8iOiJIaWxmZSIsDQogICAgImNvbnRlbnRzPyI6IsOcYmVyc2ljaHQiLA0KICAgICJ0YWJsZSBvZiBjb250ZW50cyI6IkluaGFsdHN2ZXJ6ZWljaG5pcyIsDQogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiSW5oYWx0c3ZlcnplaWNobmlzIiwNCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJQcsOkc2VudGF0aW9uIG5ldSBzdGFydGVuIiwNCiAgICAicmVzdGFydD8iOiJOZXVzdGFydCINCiAgfSwNCiAgaGVscF9kZToNCiAgICAiQmVudXR6ZW4gU2llIGRpZSBNYXVzLCBMZWVyc2NobGFnLCBkaWUgQ3Vyc29ydGFzdGVuIGxpbmtzL3JlY2h0cyBvZGVyICIgKw0KICAgICJQYWdlIHVwL1BhZ2UgRG93biB6dW0gV2VjaHNlbG4gZGVyIFNlaXRlbiB1bmQgUyB1bmQgQiBmw7xyIGRpZSBTY2hyaWZ0Z3LDtnNzZS4iLA0KDQogIHN0cmluZ3NfcGw6IHsNCiAgICAic2xpZGUiOiJzbGFqZCIsDQogICAgImhlbHA/IjoicG9tb2M/IiwNCiAgICAiY29udGVudHM/Ijoic3BpcyB0cmXFm2NpPyIsDQogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoic3BpcyB0cmXFm2NpIiwNCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJTcGlzIFRyZcWbY2kiLA0KICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IlJlc3RhcnR1aiBwcmV6ZW50YWNqxJkiLA0KICAgICJyZXN0YXJ0PyI6InJlc3RhcnQ/Ig0KICB9LA0KICBoZWxwX3BsOg0KICAgICJabWllbmlhaiBzbGFqZHkga2xpa2FqxIVjIG15c3rEhSwgbmFjaXNrYWrEhWMgc3BhY2rEmSwgc3RyemHFgmtpIGxld28vcHJhd28iICsNCiAgICAibHViIFBnVXAgLyBQZ0RuLiBVxbx5aiBrbGF3aXN6eSBTIGkgQiwgYWJ5IHptaWVuacSHIHJvem1pYXIgY3pjemlvbmtpLiIsDQoNCiAgc3RyaW5nc19mcjogew0KICAgICJzbGlkZSI6InBhZ2UiLA0KICAgICJoZWxwPyI6IkFpZGUiLA0KICAgICJjb250ZW50cz8iOiJJbmRleCIsDQogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoidGFibGUgZGVzIG1hdGnDqHJlcyIsDQogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiVGFibGUgZGVzIG1hdGnDqHJlcyIsDQogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVjb21tZW5jZXIgbCdleHBvc8OpIiwNCiAgICAicmVzdGFydD8iOiJEw6lidXQiDQogIH0sDQogIGhlbHBfZnI6DQogICAgIk5hdmlndWV6IGF2ZWMgbGEgc291cmlzLCBsYSBiYXJyZSBkJ2VzcGFjZSwgbGVzIGZsw6hjaGVzICIgKw0KICAgICJnYXVjaGUvZHJvaXRlIG91IGxlcyB0b3VjaGVzIFBnIFVwLCBQZyBEbi4gVXRpbGlzZXogIiArDQogICAgImxlcyB0b3VjaGVzIFMgZXQgQiBwb3VyIG1vZGlmaWVyIGxhIHRhaWxsZSBkZSBsYSBwb2xpY2UuIiwNCg0KICBzdHJpbmdzX2h1OiB7DQogICAgInNsaWRlIjoib2xkYWwiLA0KICAgICJoZWxwPyI6InNlZ8OtdHPDqWciLA0KICAgICJjb250ZW50cz8iOiJ0YXJ0YWxvbSIsDQogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoidGFydGFsb21qZWd5esOpayIsDQogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiVGFydGFsb21qZWd5esOpayIsDQogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiYmVtdXRhdMOzIMO6anJhaW5kw610w6FzYSIsDQogICAgInJlc3RhcnQ/Ijoiw7pqcmFpbmTDrXTDoXMiDQogIH0sDQogIGhlbHBfaHU6DQogICAgIkF6IG9sZGFsYWsga8O2enRpIGzDqXBrZWTDqXNoZXoga2F0dGludHNvbiBheiBlZ8OpcnJlbCwgdmFneSAiICsNCiAgICAiaGFzem7DoWxqYSBhIHN6w7Nrw7Z6LCBhIGJhbCwgdmFneSBhIGpvYmIgbnnDrWwsIGlsbGV0dmUgYSBQYWdlIERvd24sICIgKw0KICAgICJQYWdlIFVwIGJpbGxlbnR5xbFrZXQuIEF6IFMgw6lzIGEgQiBiaWxsZW50ecWxa2tlbCB2w6FsdG96dGF0aGF0amEgIiArDQogICAgImEgc3rDtnZlZyBtw6lyZXTDqXQuIiwNCg0KICBzdHJpbmdzX2l0OiB7DQogICAgInNsaWRlIjoicGFnLiIsDQogICAgImhlbHA/IjoiQWl1dG8iLA0KICAgICJjb250ZW50cz8iOiJJbmRpY2UiLA0KICAgICJ0YWJsZSBvZiBjb250ZW50cyI6ImluZGljZSIsDQogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiSW5kaWNlIiwNCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSaWNvbWluY2lhcmUgbGEgcHJlc2VudGF6aW9uZSIsDQogICAgInJlc3RhcnQ/IjoiSW5pemlvIg0KICB9LA0KICBoZWxwX2l0Og0KICAgICJOYXZpZ2FyZSBjb24gbW91c2UsIGJhcnJhIHNwYXppbywgZnJlY2NlIHNpbmlzdHJhL2Rlc3RyYSBvICIgKw0KICAgICJQZ1VwIGUgUGdEbi4gVXNhcmUgUyBlIEIgcGVyIGNhbWJpYXJlIGxhIGRpbWVuc2lvbmUgZGVpIGNhcmF0dGVyaS4iLA0KDQogIHN0cmluZ3NfZWw6IHsNCiAgICAic2xpZGUiOiLPg861zrvOr860zrEiLA0KICAgICJoZWxwPyI6Is6yzr/Ors64zrXOuc6xOyIsDQogICAgImNvbnRlbnRzPyI6Is+AzrXPgc65zrXPh8+MzrzOtc69zrE7IiwNCiAgICAidGFibGUgb2YgY29udGVudHMiOiLPgM6vzr3Osc66zrHPgiDPgM61z4HOuc61z4fOv868zq3Ovc+Jzr0iLA0KICAgICJUYWJsZSBvZiBDb250ZW50cyI6Is6gzq/Ovc6xzrrOsc+CIM6gzrXPgc65zrXPh86/zrzOrc69z4nOvSIsDQogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoizrXPgM6xzr3Otc66zrrOr869zrfPg863IM+AzrHPgc6/z4XPg86vzrHPg863z4IiLA0KICAgICJyZXN0YXJ0PyI6Is61z4DOsc69zrXOus66zq/Ovc63z4POtzsiDQogIH0sDQogIGhlbHBfZWw6DQogICAgIs6gzrvOv863zrPOt864zrXOr8+EzrUgzrzOtSDPhM6/IM66zrvOr866IM+Ezr/PhSDPgM6/zr3PhM65zrrOuc6/z40sIM+Ezr8gc3BhY2UsIM+EzrEgzrLOrc67zrcgzrHPgc65z4PPhM61z4HOrC/OtM61zr7Ouc6sLCAiICsNCiAgICAizq4gUGFnZSBVcCDOus6xzrkgUGFnZSBEb3duLiDOp8+BzrfPg865zrzOv8+Azr/Ouc6uz4PPhM61IM+EzrEgz4DOu86uzrrPhM+BzrEgUyDOus6xzrkgQiDOs865zrEgzr3OsSDOsc67zrvOrM6+zrXPhM61ICIgKw0KICAgICLPhM6/IM68zq3Os861zrjOv8+CIM+EzrfPgiDOs8+BzrHOvM68zrHPhM6/z4POtc65z4HOrM+CLiIsDQoNCiAgc3RyaW5nc19qYTogew0KICAgICJzbGlkZSI6IuOCueODqeOCpOODiSIsDQogICAgImhlbHA/Ijoi44OY44Or44OXIiwNCiAgICAiY29udGVudHM/Ijoi55uu5qyhIiwNCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67mrKHjgpLooajnpLoiLA0KICAgICJUYWJsZSBvZiBDb250ZW50cyI6IuebruasoSIsDQogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoi5pyA5Yid44GL44KJ5YaN55SfIiwNCiAgICAicmVzdGFydD8iOiLmnIDliJ3jgYvjgokiDQogIH0sDQogIGhlbHBfamE6DQogICAgICLjg57jgqbjgrnlt6bjgq/jg6rjg4Pjgq8g44O7IOOCueODmuODvOOCuSDjg7sg5bem5Y+z44Kt44O8ICIgKw0KICAgICAi44G+44Gf44GvIFBhZ2UgVXAg44O7IFBhZ2UgRG93buOBp+aTjeS9nO+8jCBTIOODuyBC44Gn44OV44Kp44Oz44OI44K144Kk44K65aSJ5pu0IiwNCg0KICBzdHJpbmdzX3poOiB7DQogICAgInNsaWRlIjoi5bm754Gv54mHIiwNCiAgICAiaGVscD8iOiLluK7liqk/IiwNCiAgICAiY29udGVudHM/Ijoi5YaF5a65PyIsDQogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoi55uu5b2VIiwNCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiLnm67lvZUiLA0KICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IumHjeaWsOWQr+WKqOWxleekuiIsDQogICAgInJlc3RhcnQ/Ijoi6YeN5paw5ZCv5YqoPyINCiAgfSwNCiAgaGVscF96aDoNCiAgICAi55So6byg5qCH54K55Ye7LCDnqbrmoLzmnaEsIOW3puWPs+eureWktCwgUGcgVXAg5ZKMIFBnIERuIOWvvOiIqi4gIiArDQogICAgIueUqCBTLCBCIOaUueWPmOWtl+S9k+Wkp+Wwjy4iLA0KDQogIHN0cmluZ3NfcnU6IHsNCiAgICAic2xpZGUiOiLRgdC70LDQudC0IiwNCiAgICAiaGVscD8iOiLQv9C+0LzQvtGJ0Yw/IiwNCiAgICAiY29udGVudHM/Ijoi0YHQvtC00LXRgNC20LDQvdC40LU/IiwNCiAgICAidGFibGUgb2YgY29udGVudHMiOiLQvtCz0LvQsNCy0LvQtdC90LjQtSIsDQogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi0J7Qs9C70LDQstC70LXQvdC40LUiLA0KICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6ItC/0LXRgNC10LfQsNC/0YPRgdGC0LjRgtGMINC/0YDQtdC30LXQvdGC0LDRhtC40Y4iLA0KICAgICJyZXN0YXJ0PyI6ItC/0LXRgNC10LfQsNC/0YPRgdC6PyINCiAgfSwNCiAgaGVscF9ydToNCiAgICAi0J/QtdGA0LXQvNC10YnQsNC50YLQtdGB0Ywg0LrQu9C40LrQsNGPINC80YvRiNC60L7QuSwg0LjRgdC/0L7Qu9GM0LfRg9GPINC60LvQsNCy0LjRiNGDINC/0YDQvtCx0LXQuywg0YHRgtGA0LXQu9C60LgiICsNCiAgICAi0LLQu9C10LLQvi/QstC/0YDQsNCy0L4g0LjQu9C4IFBnIFVwINC4IFBnIERuLiDQmtC70LDQstC40YjQuCBTINC4IEIg0LzQtdC90Y/RjtGCINGA0LDQt9C80LXRgCDRiNGA0LjRhNGC0LAuIiwNCg0KICBzdHJpbmdzX3N2OiB7DQogICAgInNsaWRlIjoic2lkYSIsDQogICAgImhlbHA/IjoiaGrDpGxwIiwNCiAgICAiY29udGVudHM/IjoiaW5uZWjDpWxsIiwNCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbm5laMOlbGxzZsO2cnRlY2tuaW5nIiwNCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJJbm5laMOlbGxzZsO2cnRlY2tuaW5nIiwNCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJ2aXNhIHByZXNlbnRhdGlvbmVuIGZyw6VuIGLDtnJqYW4iLA0KICAgICJyZXN0YXJ0PyI6ImLDtnJqYSBvbSINCiAgfSwNCiAgaGVscF9zdjoNCiAgICAiQmzDpGRkcmEgbWVkIGV0dCBrbGljayBtZWQgdsOkbnN0cmEgbXVza25hcHBlbiwgbWVsbGFuc2xhZ3N0YW5nZW50ZW4sICIgKw0KICAgICJ2w6Ruc3Rlci0gb2NoIGjDtmdlcnBpbHRhbmdlbnRlcm5hIGVsbGVyIHRhbmdlbnRlcm5hIFBnIFVwLCBQZyBEbi4gIiArDQogICAgIkFudsOkbmQgdGFuZ2VudGVybmEgUyBvY2ggQiBmw7ZyIGF0dCDDpG5kcmEgdGV4dGVucyBzdG9ybGVrLiIsDQoNCiAgc3RyaW5nczogeyB9LA0KDQogIGxvY2FsaXplOiBmdW5jdGlvbiAoc3JjKSB7DQogICAgaWYgKHNyYyA9PSAiIikNCiAgICAgIHJldHVybiBzcmM7DQoNCiAgICAgLy8gdHJ5IGZ1bGwgbGFuZ3VhZ2UgY29kZSwgZS5nLiBlbi1VUw0KICAgICB2YXIgcywgbG9va3VwID0gdzNjX3NsaWR5LnN0cmluZ3NbdzNjX3NsaWR5LmxhbmddOw0KDQogICAgIGlmIChsb29rdXApDQogICAgIHsNCiAgICAgICBzID0gbG9va3VwW3NyY107DQoNCiAgICAgICBpZiAocykNCiAgICAgICAgcmV0dXJuIHM7DQogICAgIH0NCg0KICAgICAvLyBzdHJpcCBjb3VudHJ5IGNvZGUgc3VmZml4LCBlLmcuDQogICAgIC8vIHRyeSBlbiBpZiB1bmRlZmluZWQgZm9yIGVuLVVTDQogICAgIHZhciBsZyA9IHczY19zbGlkeS5sYW5nLnNwbGl0KCItIik7DQoNCiAgICAgaWYgKGxnLmxlbmd0aCA+IDEpDQogICAgIHsNCiAgICAgICBsb29rdXAgPSB3M2Nfc2xpZHkuc3RyaW5nc1tsZ1swXV07DQoNCiAgICAgICBpZiAobG9va3VwKQ0KICAgICAgIHsNCiAgICAgICAgIHMgPSBsb29rdXBbc3JjXTsNCg0KICAgICAgICAgaWYgKHMpDQogICAgICAgICAgcmV0dXJuIHM7DQogICAgICAgfQ0KICAgICB9DQoNCiAgICAgLy8gb3RoZXJ3aXNlIHN0cmluZyBhcyBpcw0KICAgICByZXR1cm4gc3JjOw0KICB9LA0KDQogIGluaXRfbG9jYWxpemF0aW9uOiBmdW5jdGlvbiAoKSB7DQogICAgdmFyIGkxOG4gPSB3M2Nfc2xpZHk7DQogICAgdmFyIGhlbHBfdGV4dCA9IHczY19zbGlkeS5oZWxwX3RleHQ7DQoNCiAgICAvLyBlYWNoIHN1Y2ggbGFuZ3VhZ2UgYXJyYXkgaXMgZGVjbGFyZWQgaW4gdGhlIGxvY2FsaXplIGFycmF5DQogICAgLy8gdGhpcyBpcyB1c2VkIGFzIGluICB3M2Nfc2xpZHkubG9jYWxpemUoImZvbyIpOw0KICAgIHRoaXMuc3RyaW5ncyA9IHsNCiAgICAgICJlcyI6dGhpcy5zdHJpbmdzX2VzLA0KICAgICAgImNhIjp0aGlzLnN0cmluZ3NfY2EsDQogICAgICAiY3MiOnRoaXMuc3RyaW5nc19jcywNCiAgICAgICJubCI6dGhpcy5zdHJpbmdzX25sLA0KICAgICAgImRlIjp0aGlzLnN0cmluZ3NfZGUsDQogICAgICAicGwiOnRoaXMuc3RyaW5nc19wbCwNCiAgICAgICJmciI6dGhpcy5zdHJpbmdzX2ZyLA0KICAgICAgImh1Ijp0aGlzLnN0cmluZ3NfaHUsDQogICAgICAiaXQiOnRoaXMuc3RyaW5nc19pdCwNCiAgICAgICJlbCI6dGhpcy5zdHJpbmdzX2VsLA0KICAgICAgImpwIjp0aGlzLnN0cmluZ3NfamEsDQogICAgICAiemgiOnRoaXMuc3RyaW5nc196aCwNCiAgICAgICJydSI6dGhpcy5zdHJpbmdzX3J1LA0KICAgICAgInN2Ijp0aGlzLnN0cmluZ3Nfc3YNCiAgICB9LA0KDQogICAgaTE4bi5zdHJpbmdzX2VzW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZXM7DQogICAgaTE4bi5zdHJpbmdzX2NhW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfY2E7DQogICAgaTE4bi5zdHJpbmdzX2NzW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfY3M7DQogICAgaTE4bi5zdHJpbmdzX25sW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfbmw7DQogICAgaTE4bi5zdHJpbmdzX2RlW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZGU7DQogICAgaTE4bi5zdHJpbmdzX3BsW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfcGw7DQogICAgaTE4bi5zdHJpbmdzX2ZyW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZnI7DQogICAgaTE4bi5zdHJpbmdzX2h1W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfaHU7DQogICAgaTE4bi5zdHJpbmdzX2l0W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfaXQ7DQogICAgaTE4bi5zdHJpbmdzX2VsW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZWw7DQogICAgaTE4bi5zdHJpbmdzX2phW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfamE7DQogICAgaTE4bi5zdHJpbmdzX3poW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfemg7DQogICAgaTE4bi5zdHJpbmdzX3J1W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfcnU7DQogICAgaTE4bi5zdHJpbmdzX3N2W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfc3Y7DQoNCiAgICB3M2Nfc2xpZHkubGFuZyA9IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoImxhbmciKTsNCg0KICAgIGlmICghdzNjX3NsaWR5LmxhbmcpDQogICAgICB3M2Nfc2xpZHkubGFuZyA9IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIik7DQoNCiAgICBpZiAoIXczY19zbGlkeS5sYW5nKQ0KICAgICAgdzNjX3NsaWR5LmxhbmcgPSAiZW4iOw0KICB9DQp9Ow0KDQovLyBoYWNrIGZvciBiYWNrIGJ1dHRvbiBiZWhhdmlvcg0KaWYgKHczY19zbGlkeS5pZTYgfHwgdzNjX3NsaWR5LmllNykNCnsNCiAgZG9jdW1lbnQud3JpdGUoIjxpZnJhbWUgaWQ9J2hpc3RvcnlGcmFtZScgIiArDQogICJzcmM9J2phdmFzY3JpcHQ6XCI8aHRtbCIrIj48LyIrImh0bWw+XCInICIgKw0KICAiaGVpZ2h0PScxJyB3aWR0aD0nMScgIiArDQogICJzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7bGVmdDotODAwcHgnPjwvaWZyYW1lPiIpOw0KfQ0KDQovLyBhdHRhY2ggZXZlbnQgbGlzdGVuZXJzIGZvciBpbml0aWFsaXphdGlvbg0KdzNjX3NsaWR5LnNldF91cCgpOw0KDQovLyBoaWRlIHRoZSBzbGlkZXMgYXMgc29vbiBhcyBib2R5IGVsZW1lbnQgaXMgYXZhaWxhYmxlDQovLyB0byByZWR1Y2UgYW5ub3lpbmcgc2NyZWVuIG1lc3MgYmVmb3JlIHRoZSBvbmxvYWQgZXZlbnQNCnNldFRpbWVvdXQodzNjX3NsaWR5LmhpZGVfc2xpZGVzLCA1MCk7DQoNCg=="></script>
  <script>(function() {
  if (!window.w3c_slidy) return;
  if (!window.Shiny) return;
  if (!window.$) return;
  // whenever a slide changes, tell shiny to recalculate what is displayed
  window.w3c_slidy.add_observer(function (slide_num) {
    // slide_num starts at position 1
    $(w3c_slidy.slides[slide_num - 1]).trigger("shown");
  });
})()
</script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Informe_Q3</h1>
  <p class="author">
Kevin Camposeco
  </p>
  <p class="date">27/5/2021</p>
</div>
<div id="r-markdown" class="slide section level2">
<h1>R Markdown</h1>
<p>This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>When you click the <strong>Knit</strong> button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.</p>
</div>
<div id="slide-with-bullets" class="slide section level2">
<h1>Slide with Bullets</h1>
<ul>
<li>Bullet 1</li>
<li>Bullet 2</li>
<li>Bullet 3</li>
</ul>
</div>
<div id="slide-with-r-output" class="slide section level2">
<h1>Slide with R Output</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cars)</span></code></pre></div>
<pre><code>##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00</code></pre>
</div>
<div id="slide-with-plot" class="slide section level2">
<h1>Slide with Plot</h1>
<p><img src="data:image/png;base64,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" width="768" /></p>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
